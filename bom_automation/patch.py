import os, base64, shutil

files = {
    'app.py': 'aW1wb3J0IGlvCmltcG9ydCBwYW5kYXMgYXMgcGQKaW1wb3J0IHN0cmVhbWxpdCBhcyBzdAoKZnJvbSBleHBvcnRlcnMuZXhjZWxfZXhwb3J0ZXIgaW1wb3J0IGV4cG9ydF90b19leGNlbApmcm9tIGV4cG9ydGVycy5jc3ZfZXhwb3J0ZXIgaW1wb3J0IGV4cG9ydF90b19jc3YKZnJvbSBwYXJzZXJzLnBkZl9wYXJzZXIgaW1wb3J0IHBhcnNlX2JvbV9wZGYKZnJvbSB2YWxpZGF0b3JzLmZpbGxlciBpbXBvcnQgdmFsaWRhdGVfYW5kX2ZpbGwsIE5FV19DT0xVTU5TCmZyb20gdmFsaWRhdG9ycy5tYXRjaGVyIGltcG9ydCBhdXRvX2RldGVjdF9jb2x1bW5zCgoKc3Quc2V0X3BhZ2VfY29uZmlnKAogICAgcGFnZV90aXRsZT0iQ29sdW1iaWEgQk9NIEF1dG9tYXRpb24iLAogICAgcGFnZV9pY29uPSLwn6eiIiwKICAgIGxheW91dD0id2lkZSIsCiAgICBpbml0aWFsX3NpZGViYXJfc3RhdGU9ImV4cGFuZGVkIgopCgpzdC5tYXJrZG93bigiIiIKPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLnRhaWx3aW5kY3NzLmNvbSI+PC9zY3JpcHQ+CjxsaW5rIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9SW50ZXI6d2dodEAzMDA7NDAwOzUwMDs2MDA7NzAwJmZhbWlseT1KZXRCcmFpbnMrTW9ubzp3Z2h0QDQwMDs1MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgo8c3R5bGU+CiAgaHRtbCwgYm9keSwgW2NsYXNzKj0iY3NzIl0geyBmb250LWZhbWlseTonSW50ZXInLHNhbnMtc2VyaWY7IGJhY2tncm91bmQ6IzBmMTExNzsgY29sb3I6I2U4ZThlODsgZm9udC1zaXplOjE0cHg7IC13ZWJraXQtZm9udC1zbW9vdGhpbmc6YW50aWFsaWFzZWQ7IH0KICAjTWFpbk1lbnUsIGZvb3RlciwgaGVhZGVyIHsgdmlzaWJpbGl0eTpoaWRkZW47IH0KICAuYmxvY2stY29udGFpbmVyIHsgcGFkZGluZzoycmVtIDIuNXJlbSAhaW1wb3J0YW50OyBtYXgtd2lkdGg6MTAwJSAhaW1wb3J0YW50OyB9CiAgc2VjdGlvbltkYXRhLXRlc3RpZD0ic3RTaWRlYmFyIl0geyBiYWNrZ3JvdW5kOiMxMzE1MWU7IGJvcmRlci1yaWdodDoxcHggc29saWQgIzFlMjEzMDsgfQogIHNlY3Rpb25bZGF0YS10ZXN0aWQ9InN0U2lkZWJhciJdIC5ibG9jay1jb250YWluZXIgeyBwYWRkaW5nOjEuNXJlbSAxLjJyZW0gIWltcG9ydGFudDsgfQogIFtkYXRhLXRlc3RpZD0ic3RNZXRyaWMiXSB7IGJhY2tncm91bmQ6IzEzMTUxZTsgYm9yZGVyOjFweCBzb2xpZCAjMWUyMTMwOyBib3JkZXItcmFkaXVzOjEwcHg7IHBhZGRpbmc6MXJlbSAxLjJyZW07IH0KICBbZGF0YS10ZXN0aWQ9InN0TWV0cmljTGFiZWwiXSBwIHsgZm9udC1zaXplOjAuNzJyZW0gIWltcG9ydGFudDsgZm9udC13ZWlnaHQ6NTAwICFpbXBvcnRhbnQ7IHRleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTsgbGV0dGVyLXNwYWNpbmc6MC4wOGVtOyBjb2xvcjojOWNhM2FmICFpbXBvcnRhbnQ7IH0KICBbZGF0YS10ZXN0aWQ9InN0TWV0cmljVmFsdWUiXSB7IGZvbnQtc2l6ZToxLjRyZW0gIWltcG9ydGFudDsgZm9udC13ZWlnaHQ6NjAwICFpbXBvcnRhbnQ7IGNvbG9yOiNmZmYgIWltcG9ydGFudDsgfQogIC5zdERhdGFGcmFtZSB7IGJvcmRlci1yYWRpdXM6OHB4OyBvdmVyZmxvdzpoaWRkZW47IGJvcmRlcjoxcHggc29saWQgIzFlMjEzMDsgfQogIC5zdERhdGFGcmFtZSB0ZCwgLnN0RGF0YUZyYW1lIHRoIHsgZm9udC1zaXplOjAuODJyZW0gIWltcG9ydGFudDsgfQogIC5zdEJ1dHRvbiA+IGJ1dHRvbiwgLnN0RG93bmxvYWRCdXR0b24gPiBidXR0b24gewogICAgZm9udC13ZWlnaHQ6NTAwICFpbXBvcnRhbnQ7IGZvbnQtc2l6ZTowLjc4cmVtICFpbXBvcnRhbnQ7IGxldHRlci1zcGFjaW5nOjAuMDNlbSAhaW1wb3J0YW50OwogICAgdGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlICFpbXBvcnRhbnQ7IGJvcmRlci1yYWRpdXM6OHB4ICFpbXBvcnRhbnQ7IGJvcmRlcjoxcHggc29saWQgIzJhMmQzZSAhaW1wb3J0YW50OwogICAgYmFja2dyb3VuZDojMTMxNTFlICFpbXBvcnRhbnQ7IGNvbG9yOiNlOGU4ZTggIWltcG9ydGFudDsgdHJhbnNpdGlvbjphbGwgMC4xNXMgZWFzZSAhaW1wb3J0YW50OyBwYWRkaW5nOjAuNXJlbSAxLjJyZW0gIWltcG9ydGFudDsKICB9CiAgLnN0QnV0dG9uID4gYnV0dG9uOmhvdmVyLCAuc3REb3dubG9hZEJ1dHRvbiA+IGJ1dHRvbjpob3ZlciB7IGJhY2tncm91bmQ6IzFlMjEzMCAhaW1wb3J0YW50OyBib3JkZXItY29sb3I6IzNiODJmNiAhaW1wb3J0YW50OyBjb2xvcjojZmZmICFpbXBvcnRhbnQ7IH0KICBbZGF0YS10ZXN0aWQ9InN0RmlsZVVwbG9hZGVyIl0geyBib3JkZXI6MS41cHggZGFzaGVkICMyYTJkM2UgIWltcG9ydGFudDsgYm9yZGVyLXJhZGl1czoxMnB4ICFpbXBvcnRhbnQ7IGJhY2tncm91bmQ6IzEzMTUxZSAhaW1wb3J0YW50OyB9CiAgW2RhdGEtdGVzdGlkPSJzdFNlbGVjdGJveCJdID4gZGl2ID4gZGl2IHsgYmFja2dyb3VuZDojMTMxNTFlICFpbXBvcnRhbnQ7IGJvcmRlcjoxcHggc29saWQgIzJhMmQzZSAhaW1wb3J0YW50OyBib3JkZXItcmFkaXVzOjhweCAhaW1wb3J0YW50OyBjb2xvcjojZThlOGU4ICFpbXBvcnRhbnQ7IGZvbnQtc2l6ZTowLjg1cmVtICFpbXBvcnRhbnQ7IH0KICBbZGF0YS10ZXN0aWQ9InN0RXhwYW5kZXIiXSB7IGJvcmRlcjoxcHggc29saWQgIzFlMjEzMCAhaW1wb3J0YW50OyBib3JkZXItcmFkaXVzOjhweCAhaW1wb3J0YW50OyBiYWNrZ3JvdW5kOiMxMzE1MWUgIWltcG9ydGFudDsgfQogIGJ1dHRvbltkYXRhLWJhc2V3ZWI9InRhYiJdIHsgZm9udC1zaXplOjAuOHJlbSAhaW1wb3J0YW50OyBmb250LXdlaWdodDo1MDAgIWltcG9ydGFudDsgbGV0dGVyLXNwYWNpbmc6MC4wNGVtICFpbXBvcnRhbnQ7IHRleHQtdHJhbnNmb3JtOnVwcGVyY2FzZSAhaW1wb3J0YW50OyB9Cjwvc3R5bGU+CiIiIiwgdW5zYWZlX2FsbG93X2h0bWw9VHJ1ZSkKCgojIOKUgOKUgCBVSSBoZWxwZXJzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKZGVmIHJlbmRlcl9zZWN0aW9uX2hlYWRlcih0aXRsZSwgc3VidGl0bGU9IiIpOgogICAgc3QubWFya2Rvd24oZiIiIgogICAgPGRpdiBjbGFzcz0ibWItNiI+CiAgICAgIDxoMiBzdHlsZT0iZm9udC1zaXplOjEuNDVyZW07Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiNmZmY7bGV0dGVyLXNwYWNpbmc6LTAuMDFlbTttYXJnaW4tYm90dG9tOjAuMTVyZW07Ij57dGl0bGV9PC9oMj4KICAgICAgeyI8cCBzdHlsZT0nZm9udC1zaXplOjAuNzVyZW07Y29sb3I6IzVhNjA4MDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6MC4wOGVtOyc+IiArIHN1YnRpdGxlICsgIjwvcD4iIGlmIHN1YnRpdGxlIGVsc2UgIiJ9CiAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDoycHg7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoOTBkZWcsIzNiODJmNiAwJSx0cmFuc3BhcmVudCA3MCUpO21hcmdpbi10b3A6MC41cmVtOyI+PC9kaXY+CiAgICA8L2Rpdj4iIiIsIHVuc2FmZV9hbGxvd19odG1sPVRydWUpCgpkZWYgcmVuZGVyX2RpdmlkZXIoKToKICAgIHN0Lm1hcmtkb3duKCc8ZGl2IHN0eWxlPSJoZWlnaHQ6MXB4O2JhY2tncm91bmQ6IzFlMjEzMDttYXJnaW46MS41cmVtIDA7Ij48L2Rpdj4nLCB1bnNhZmVfYWxsb3dfaHRtbD1UcnVlKQoKZGVmIHJlbmRlcl9pbmZvX2Jhbm5lcihtZXNzYWdlKToKICAgIHN0Lm1hcmtkb3duKGYiIiI8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiMwZDFhMmU7Ym9yZGVyOjFweCBzb2xpZCAjMWUzYTVmO2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjM2I4MmY2OwogICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czo4cHg7cGFkZGluZzowLjg1cmVtIDEuMXJlbTtmb250LXNpemU6MC44MnJlbTtjb2xvcjojOTNjNWZkO21hcmdpbi1ib3R0b206MS4ycmVtOyI+CiAgICAgIOKEuSAmbmJzcDt7bWVzc2FnZX08L2Rpdj4iIiIsIHVuc2FmZV9hbGxvd19odG1sPVRydWUpCgpkZWYgcmVuZGVyX3dhcm5fYmFubmVyKG1lc3NhZ2UpOgogICAgc3QubWFya2Rvd24oZiIiIjxkaXYgc3R5bGU9ImJhY2tncm91bmQ6IzFjMTUwMDtib3JkZXI6MXB4IHNvbGlkICMzZDJlMDA7Ym9yZGVyLWxlZnQ6M3B4IHNvbGlkICNmNTllMGI7CiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjAuODVyZW0gMS4xcmVtO2ZvbnQtc2l6ZTowLjgycmVtO2NvbG9yOiNmY2QzNGQ7bWFyZ2luLWJvdHRvbToxLjJyZW07Ij4KICAgICAg4pqgICZuYnNwO3ttZXNzYWdlfTwvZGl2PiIiIiwgdW5zYWZlX2FsbG93X2h0bWw9VHJ1ZSkKCmRlZiByZW5kZXJfdGFibGVfbWV0YShkZik6CiAgICBzdC5tYXJrZG93bihmIiIiPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuNzJyZW07Y29sb3I6IzVhNjA4MDttYXJnaW4tYm90dG9tOjAuNXJlbTtsZXR0ZXItc3BhY2luZzowLjA1ZW07dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlOyI+CiAgICAgIHtsZW4oZGYpfSByb3dzICZuYnNwO8K3Jm5ic3A7IHtsZW4oZGYuY29sdW1ucyl9IGNvbHVtbnM8L2Rpdj4iIiIsIHVuc2FmZV9hbGxvd19odG1sPVRydWUpCgpkZWYgcmVuZGVyX3ZhbGlkYXRpb25fc3VtbWFyeShvaywgcGFydGlhbCwgZXJyLCB0b3RhbCk6CiAgICBzdC5tYXJrZG93bihmIiIiCiAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdCg0LDFmcik7Z2FwOjFyZW07bWFyZ2luLWJvdHRvbToxLjVyZW07Ij4KICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojMGQyMjE4O2JvcmRlcjoxcHggc29saWQgIzFhNGEzMDtib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzoxcmVtIDEuMnJlbTt0ZXh0LWFsaWduOmNlbnRlcjsiPgogICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToycmVtO2ZvbnQtd2VpZ2h0OjgwMDtjb2xvcjojMzRkMzk5O2xpbmUtaGVpZ2h0OjE7Ij57b2t9PC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuNjhyZW07dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOjAuMWVtO21hcmdpbi10b3A6MC4zcmVtO2NvbG9yOiM2YjcyODA7Ij5WYWxpZGF0ZWQ8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6IzFjMTUwMDtib3JkZXI6MXB4IHNvbGlkICMzZDJlMDA7Ym9yZGVyLXJhZGl1czoxMHB4O3BhZGRpbmc6MXJlbSAxLjJyZW07dGV4dC1hbGlnbjpjZW50ZXI7Ij4KICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MnJlbTtmb250LXdlaWdodDo4MDA7Y29sb3I6I2Y1OWUwYjtsaW5lLWhlaWdodDoxOyI+e3BhcnRpYWx9PC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuNjhyZW07dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOjAuMWVtO21hcmdpbi10b3A6MC4zcmVtO2NvbG9yOiM2YjcyODA7Ij5QYXJ0aWFsPC9kaXY+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiMxZTBkMGQ7Ym9yZGVyOjFweCBzb2xpZCAjNGExYTFhO2JvcmRlci1yYWRpdXM6MTBweDtwYWRkaW5nOjFyZW0gMS4ycmVtO3RleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjJyZW07Zm9udC13ZWlnaHQ6ODAwO2NvbG9yOiNmODcxNzE7bGluZS1oZWlnaHQ6MTsiPntlcnJ9PC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuNjhyZW07dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOjAuMWVtO21hcmdpbi10b3A6MC4zcmVtO2NvbG9yOiM2YjcyODA7Ij5FcnJvcnM8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6IzEzMTUxZTtib3JkZXI6MXB4IHNvbGlkICMxZTIxMzA7Ym9yZGVyLXJhZGl1czoxMHB4O3BhZGRpbmc6MXJlbSAxLjJyZW07dGV4dC1hbGlnbjpjZW50ZXI7Ij4KICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MnJlbTtmb250LXdlaWdodDo4MDA7Y29sb3I6IzljYTNhZjtsaW5lLWhlaWdodDoxOyI+e3RvdGFsfTwvZGl2PgogICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTowLjY4cmVtO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzowLjFlbTttYXJnaW4tdG9wOjAuM3JlbTtjb2xvcjojNmI3MjgwOyI+VG90YWwgUm93czwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PiIiIiwgdW5zYWZlX2FsbG93X2h0bWw9VHJ1ZSkKCgojIOKUgOKUgCBTaWRlYmFyIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKZGVmIHJlbmRlcl9zaWRlYmFyKCk6CiAgICB3aXRoIHN0LnNpZGViYXI6CiAgICAgICAgc3QubWFya2Rvd24oIiIiPGRpdiBzdHlsZT0iZm9udC1zaXplOjEuMTVyZW07Zm9udC13ZWlnaHQ6ODAwO2NvbG9yOiNmZmY7bGluZS1oZWlnaHQ6MS4yO21hcmdpbi1ib3R0b206MC4ycmVtOyI+CiAgICAgICAgICBDb2x1bWJpYSBCT008YnI+QXV0b21hdGlvbjwvZGl2PgogICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTowLjdyZW07Y29sb3I6IzVhNjA4MDtsZXR0ZXItc3BhY2luZzowLjEyZW07dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO21hcmdpbi1ib3R0b206MS41cmVtOyI+CiAgICAgICAgICBUcmltICYgTGFiZWwgVmFsaWRhdG9yPC9kaXY+IiIiLCB1bnNhZmVfYWxsb3dfaHRtbD1UcnVlKQoKICAgICAgICBib21fZGljdCA9IHN0LnNlc3Npb25fc3RhdGUuZ2V0KCJib21fZGljdCIsIHt9KQogICAgICAgIGxvYWRlZCA9IGxlbihib21fZGljdCkgPiAwCgogICAgICAgIGlmIGxvYWRlZDoKICAgICAgICAgICAgc3QubWFya2Rvd24oZiIiIjxkaXYgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo2cHg7cGFkZGluZzo1cHggMTJweDsKICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6MjBweDtmb250LXNpemU6MC43MnJlbTtmb250LXdlaWdodDo1MDA7bGV0dGVyLXNwYWNpbmc6MC4wNmVtO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTsKICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206MC41cmVtO2JhY2tncm91bmQ6IzBkMjIxODtjb2xvcjojMzRkMzk5O2JvcmRlcjoxcHggc29saWQgIzFhNGEzMDsiPgogICAgICAgICAgICAgIOKspCAmbmJzcDt7bGVuKGJvbV9kaWN0KX0gQk9NeydzJyBpZiBsZW4oYm9tX2RpY3QpPjEgZWxzZSAnJ30gTG9hZGVkPC9kaXY+IiIiLCB1bnNhZmVfYWxsb3dfaHRtbD1UcnVlKQogICAgICAgICAgICBmb3Igc3R5bGUsIGJvbSBpbiBib21fZGljdC5pdGVtcygpOgogICAgICAgICAgICAgICAgbWV0YSA9IGJvbS5nZXQoIm1ldGFkYXRhIiwge30pCiAgICAgICAgICAgICAgICBzdC5tYXJrZG93bihmIiIiPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuNzJyZW07Y29sb3I6IzljYTNhZjtwYWRkaW5nOjRweCAwO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICMxZTIxMzA7Ij4KICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImNvbG9yOiMzYjgyZjY7Zm9udC13ZWlnaHQ6NjAwOyI+e3N0eWxlfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgJm5ic3A7wrcmbmJzcDsge21ldGEuZ2V0KCdzZWFzb24nLCfigJQnKX0gJm5ic3A7wrcmbmJzcDsge21ldGEuZ2V0KCdwcm9kdWN0aW9uX2xvJywn4oCUJyl9PC9kaXY+IiIiLAogICAgICAgICAgICAgICAgICB1bnNhZmVfYWxsb3dfaHRtbD1UcnVlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHN0Lm1hcmtkb3duKCIiIjxkaXYgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo2cHg7cGFkZGluZzo1cHggMTJweDsKICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6MjBweDtmb250LXNpemU6MC43MnJlbTtmb250LXdlaWdodDo1MDA7bGV0dGVyLXNwYWNpbmc6MC4wNmVtO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTsKICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206MS4ycmVtO2JhY2tncm91bmQ6IzFlMWUyZTtjb2xvcjojNmI3MjgwO2JvcmRlcjoxcHggc29saWQgIzJhMmEzZTsiPgogICAgICAgICAgICAgIOKspCAmbmJzcDtObyBCT00gTG9hZGVkPC9kaXY+IiIiLCB1bnNhZmVfYWxsb3dfaHRtbD1UcnVlKQoKICAgICAgICB3aXRoIHN0LmV4cGFuZGVyKCJIb3cgdG8gdXNlIiwgZXhwYW5kZWQ9RmFsc2UpOgogICAgICAgICAgICBzdC5tYXJrZG93bigiIiIKICAgICAgICAgICAgKipTdGVwIDEqKiDigJQgVXBsb2FkIG9uZSBvciBtb3JlIENvbHVtYmlhIEJPTSBQREZzIGluIHRoZSAqKlBERiBFeHRyYWN0aW9uKiogdGFiLgogICAgICAgICAgICAKICAgICAgICAgICAgKipTdGVwIDIqKiDigJQgSW5zcGVjdCBlYWNoIHBhcnNlZCBzZWN0aW9uIHRvIHZlcmlmeSBleHRyYWN0aW9uLgogICAgICAgICAgICAKICAgICAgICAgICAgKipTdGVwIDMqKiDigJQgR28gdG8gKipCT00gQ29tcGFyaXNvbioqLCB1cGxvYWQgeW91ciBFeGNlbC9DU1YgKGNhbiBoYXZlIDEwMCsgcm93cywgbXVsdGlwbGUgc3R5bGVzKS4KICAgICAgICAgICAgCiAgICAgICAgICAgICoqU3RlcCA0Kiog4oCUIE1hcCBjb2x1bW5zLCBjb25maWd1cmUgbGFiZWwgZHJvcGRvd25zLCBydW4gdmFsaWRhdGlvbiwgZXhwb3J0LgogICAgICAgICAgICAiIiIpCgogICAgICAgIHJlbmRlcl9kaXZpZGVyKCkKICAgICAgICBpZiBzdC5idXR0b24oIvCfl5EgQ2xlYXIgQWxsIERhdGEiLCB1c2VfY29udGFpbmVyX3dpZHRoPVRydWUpOgogICAgICAgICAgICBmb3IgayBpbiBbImJvbV9kaWN0IiwgImNvbXBhcmlzb25fcmF3IiwgInZhbGlkYXRpb25fcmVzdWx0IiwKICAgICAgICAgICAgICAgICAgICAgICJzZWxlY3RlZF9tYWluX2xhYmVsX2NvbXAiLCAic2VsZWN0ZWRfY2FyZV9sYWJlbF9jb21wIl06CiAgICAgICAgICAgICAgICBzdC5zZXNzaW9uX3N0YXRlLnBvcChrLCBOb25lKQogICAgICAgICAgICBzdC5yZXJ1bigpCgoKIyDilIDilIAgUERGIEV4dHJhY3Rpb24gVGFiIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKZGVmIHJlbmRlcl9wZGZfdGFiKCk6CiAgICByZW5kZXJfc2VjdGlvbl9oZWFkZXIoIlBERiBFeHRyYWN0aW9uIiwgIlVwbG9hZCAmIGluc3BlY3QgQk9NIHNlY3Rpb25zIikKCiAgICB1cGxvYWRlZF9wZGZzID0gc3QuZmlsZV91cGxvYWRlcigKICAgICAgICAiRHJvcCBvbmUgb3IgbW9yZSBDb2x1bWJpYSBCT00gUERGcyBoZXJlIiwKICAgICAgICB0eXBlPVsicGRmIl0sCiAgICAgICAgYWNjZXB0X211bHRpcGxlX2ZpbGVzPVRydWUsCiAgICAgICAga2V5PSJwZGZfdXBsb2FkZXIiLAogICAgICAgIGhlbHA9IkVhY2ggUERGIGlzIG1hdGNoZWQgdG8gRXhjZWwgcm93cyBieSBpdHMgc3R5bGUgbnVtYmVyIOKAlCBubyBoYXJkY29kaW5nIG5lZWRlZCIKICAgICkKCiAgICBpZiBub3QgdXBsb2FkZWRfcGRmczoKICAgICAgICByZW5kZXJfaW5mb19iYW5uZXIoIlVwbG9hZCBvbmUgb3IgbW9yZSBDb2x1bWJpYSBCT00gUERGcy4gRWFjaCBQREYncyBzdHlsZSBpcyBhdXRvLWRldGVjdGVkIGFuZCB1c2VkIHRvIG1hdGNoIHJvd3MgaW4geW91ciBFeGNlbC4iKQogICAgICAgIHJldHVybgoKICAgICMgUGFyc2UgYW5kIHN0b3JlIGFsbCBQREZzCiAgICBib21fZGljdCA9IHN0LnNlc3Npb25fc3RhdGUuZ2V0KCJib21fZGljdCIsIHt9KQogICAgbmV3bHlfcGFyc2VkID0gW10KICAgIHdpdGggc3Quc3Bpbm5lcihmIlBhcnNpbmcge2xlbih1cGxvYWRlZF9wZGZzKX0gUERGKHMpLi4uIik6CiAgICAgICAgZm9yIHBkZl9maWxlIGluIHVwbG9hZGVkX3BkZnM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGJvbV9kYXRhID0gcGFyc2VfYm9tX3BkZihwZGZfZmlsZSkKICAgICAgICAgICAgICAgIHN0eWxlID0gYm9tX2RhdGEuZ2V0KCJtZXRhZGF0YSIsIHt9KS5nZXQoInN0eWxlIikgb3IgcGRmX2ZpbGUubmFtZQogICAgICAgICAgICAgICAgYm9tX2RpY3Rbc3R5bGVdID0gYm9tX2RhdGEKICAgICAgICAgICAgICAgIG5ld2x5X3BhcnNlZC5hcHBlbmQoc3R5bGUpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHN0LmVycm9yKGYiRmFpbGVkIHRvIHBhcnNlIHtwZGZfZmlsZS5uYW1lfToge2V9IikKICAgIHN0LnNlc3Npb25fc3RhdGVbImJvbV9kaWN0Il0gPSBib21fZGljdAoKICAgIGlmIG5vdCBib21fZGljdDoKICAgICAgICByZXR1cm4KCiAgICByZW5kZXJfaW5mb19iYW5uZXIoZiJMb2FkZWQge2xlbihib21fZGljdCl9IEJPTShzKTogeycsICcuam9pbihib21fZGljdC5rZXlzKCkpfSIpCgogICAgIyDilIDilIAgU3VtbWFyeSB0YWJsZSBvZiBhbGwgbG9hZGVkIEJPTXMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSACiAgICByZW5kZXJfZGl2aWRlcigpCiAgICBzdC5tYXJrZG93bigiIiI8ZGl2IHN0eWxlPSJmb250LXNpemU6MC42OHJlbTt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6MC4xZW07CiAgICAgICAgICAgICAgICBjb2xvcjojNWE2MDgwO21hcmdpbi1ib3R0b206MC43NXJlbTsiPkxvYWRlZCBCT01zPC9kaXY+IiIiLCB1bnNhZmVfYWxsb3dfaHRtbD1UcnVlKQoKICAgIHN1bW1hcnlfcm93cyA9IFtdCiAgICBmb3Igc3R5bGUsIGJvbSBpbiBib21fZGljdC5pdGVtcygpOgogICAgICAgIG1ldGEgPSBib20uZ2V0KCJtZXRhZGF0YSIsIHt9KQogICAgICAgIHNlY3Rpb25zX3dpdGhfZGF0YSA9IFtrIGZvciBrLCB2IGluIGJvbS5pdGVtcygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBrIG5vdCBpbiAoIm1ldGFkYXRhIiwgInN1cHBsaWVyX2xvb2t1cCIpIGFuZCBpc2luc3RhbmNlKHYsIHBkLkRhdGFGcmFtZSkgYW5kIG5vdCB2LmVtcHR5XQogICAgICAgIHN1bW1hcnlfcm93cy5hcHBlbmQoewogICAgICAgICAgICAiU3R5bGUiOiAgICAgICAgc3R5bGUsCiAgICAgICAgICAgICJTZWFzb24iOiAgICAgICBtZXRhLmdldCgic2Vhc29uIiwgIuKAlCIpLAogICAgICAgICAgICAiRGVzaWduIjogICAgICAgbWV0YS5nZXQoImRlc2lnbiIsICLigJQiKSwKICAgICAgICAgICAgIkxPIjogICAgICAgICAgIG1ldGEuZ2V0KCJwcm9kdWN0aW9uX2xvIiwgIuKAlCIpLAogICAgICAgICAgICAiU2VjdGlvbnMiOiAgICAgbGVuKHNlY3Rpb25zX3dpdGhfZGF0YSksCiAgICAgICAgICAgICJDb2xvcndheXMiOiAgICBsZW4oYm9tLmdldCgiY29sb3JfYm9tIiwgcGQuRGF0YUZyYW1lKCkpLmNvbHVtbnMpIGlmIG5vdCBib20uZ2V0KCJjb2xvcl9ib20iLCBwZC5EYXRhRnJhbWUoKSkuZW1wdHkgZWxzZSAwLAogICAgICAgIH0pCiAgICBzdC5kYXRhZnJhbWUocGQuRGF0YUZyYW1lKHN1bW1hcnlfcm93cyksIHVzZV9jb250YWluZXJfd2lkdGg9VHJ1ZSwgaGVpZ2h0PW1pbig4MCArIDM1ICogbGVuKHN1bW1hcnlfcm93cyksIDMwMCkpCgogICAgIyDilIDilIAgSW5zcGVjdCBpbmRpdmlkdWFsIEJPTSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICAgIHJlbmRlcl9kaXZpZGVyKCkKICAgIHNlbGVjdGVkX3N0eWxlID0gc3Quc2VsZWN0Ym94KCJJbnNwZWN0IEJPTSBmb3Igc3R5bGUiLCBvcHRpb25zPWxpc3QoYm9tX2RpY3Qua2V5cygpKSkKICAgIGJvbV9kYXRhID0gYm9tX2RpY3Rbc2VsZWN0ZWRfc3R5bGVdCiAgICBtZXRhID0gYm9tX2RhdGEuZ2V0KCJtZXRhZGF0YSIsIHt9KQoKICAgIGMxLCBjMiwgYzMsIGM0ID0gc3QuY29sdW1ucyg0KQogICAgYzEubWV0cmljKCJTdHlsZSIsICBtZXRhLmdldCgic3R5bGUiLCAi4oCUIikpCiAgICBjMi5tZXRyaWMoIlNlYXNvbiIsIG1ldGEuZ2V0KCJzZWFzb24iLCAi4oCUIikpCiAgICBjMy5tZXRyaWMoIkRlc2lnbiIsIG1ldGEuZ2V0KCJkZXNpZ24iLCAi4oCUIikpCiAgICBjNC5tZXRyaWMoIlByb2R1Y3Rpb24gTE8iLCBtZXRhLmdldCgicHJvZHVjdGlvbl9sbyIsICLigJQiKSkKCiAgICByZW5kZXJfZGl2aWRlcigpCiAgICBzZWN0aW9uX2tleXMgPSBbayBmb3IgaywgdiBpbiBib21fZGF0YS5pdGVtcygpCiAgICAgICAgICAgICAgICAgICAgaWYgayBub3QgaW4gKCJtZXRhZGF0YSIsICJzdXBwbGllcl9sb29rdXAiKSBhbmQgaXNpbnN0YW5jZSh2LCBwZC5EYXRhRnJhbWUpIGFuZCBub3Qgdi5lbXB0eV0KICAgIGlmIG5vdCBzZWN0aW9uX2tleXM6CiAgICAgICAgcmVuZGVyX3dhcm5fYmFubmVyKCJObyBzZWN0aW9ucyB3ZXJlIGV4dHJhY3RlZCBmcm9tIHRoaXMgUERGLiIpCiAgICAgICAgcmV0dXJuCgogICAgY29sX3NlbCwgY29sX3NlYXJjaCA9IHN0LmNvbHVtbnMoWzIsIDNdKQogICAgd2l0aCBjb2xfc2VsOgogICAgICAgIHNlY3Rpb24gPSBzdC5zZWxlY3Rib3goIlNlY3Rpb24iLCBvcHRpb25zPXNlY3Rpb25fa2V5cykKICAgIHdpdGggY29sX3NlYXJjaDoKICAgICAgICBzZWFyY2ggPSBzdC50ZXh0X2lucHV0KCJGaWx0ZXIgcm93cyIsICIiLCBwbGFjZWhvbGRlcj0iU2VhcmNoIGFueSB2YWx1ZS4uLiIpCgogICAgZGYgPSBib21fZGF0YVtzZWN0aW9uXQogICAgdmlld19kZiA9IGRmLmNvcHkoKQogICAgaWYgc2VhcmNoOgogICAgICAgIHZpZXdfZGYgPSB2aWV3X2RmW3ZpZXdfZGYuYXBwbHkoCiAgICAgICAgICAgIGxhbWJkYSByOiByLmFzdHlwZShzdHIpLnN0ci5jb250YWlucyhzZWFyY2gsIGNhc2U9RmFsc2UsIG5hPUZhbHNlKS5hbnkoKSwgYXhpcz0xCiAgICAgICAgKV0KCiAgICByZW5kZXJfdGFibGVfbWV0YSh2aWV3X2RmKQogICAgc3QuZGF0YWZyYW1lKHZpZXdfZGYsIHVzZV9jb250YWluZXJfd2lkdGg9VHJ1ZSwgaGVpZ2h0PTM4MCkKCiAgICByZW5kZXJfZGl2aWRlcigpCiAgICBjMSwgYzIgPSBzdC5jb2x1bW5zKDIpCiAgICB3aXRoIGMxOgogICAgICAgIHN0LmRvd25sb2FkX2J1dHRvbigi4qyHIEV4cG9ydCBTZWN0aW9uIOKGkiBDU1YiLCBkYXRhPWV4cG9ydF90b19jc3Yodmlld19kZiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVfbmFtZT1mIntzZWxlY3RlZF9zdHlsZX1fe3NlY3Rpb259LmNzdiIsIG1pbWU9InRleHQvY3N2IiwgdXNlX2NvbnRhaW5lcl93aWR0aD1UcnVlKQogICAgd2l0aCBjMjoKICAgICAgICBidWYgPSBpby5CeXRlc0lPKCkKICAgICAgICB3aXRoIHBkLkV4Y2VsV3JpdGVyKGJ1ZiwgZW5naW5lPSJ4bHN4d3JpdGVyIikgYXMgd3JpdGVyOgogICAgICAgICAgICBmb3IgayBpbiBzZWN0aW9uX2tleXM6CiAgICAgICAgICAgICAgICBib21fZGF0YVtrXS50b19leGNlbCh3cml0ZXIsIGluZGV4PUZhbHNlLCBzaGVldF9uYW1lPWtbOjMxXSkKICAgICAgICBzdC5kb3dubG9hZF9idXR0b24oIuKshyBFeHBvcnQgQWxsIFNlY3Rpb25zIOKGkiBFeGNlbCIsIGRhdGE9YnVmLmdldHZhbHVlKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVfbmFtZT1mIntzZWxlY3RlZF9zdHlsZX1fc2VjdGlvbnMueGxzeCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbWU9ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlX2NvbnRhaW5lcl93aWR0aD1UcnVlKQoKCiMg4pSA4pSAIENvbXBhcmlzb24gVGFiIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKZGVmIF9yZWFkX2NvbXBhcmlzb25fZmlsZShmaWxlKSAtPiBwZC5EYXRhRnJhbWU6CiAgICByYXcgPSBwZC5yZWFkX2V4Y2VsKGZpbGUsIGhlYWRlcj1Ob25lKSBpZiBmaWxlLm5hbWUubG93ZXIoKS5lbmRzd2l0aCgoIi54bHN4IiwgIi54bHMiKSkgZWxzZSBwZC5yZWFkX2NzdihmaWxlLCBoZWFkZXI9Tm9uZSkKICAgIGhlYWRlcl9yb3dfaWR4ID0gMAogICAgZm9yIGksIHJvdyBpbiByYXcuaXRlcnJvd3MoKToKICAgICAgICBub25fZW1wdHkgPSBzdW0oMSBmb3IgdiBpbiByb3cgaWYgc3RyKHYpLnN0cmlwKCkgbm90IGluICgiIiwgIm5hbiIsICJOb25lIikpCiAgICAgICAgaWYgbm9uX2VtcHR5ID49IG1heCgxLCBsZW4ocmF3LmNvbHVtbnMpICogMC41KToKICAgICAgICAgICAgaGVhZGVyX3Jvd19pZHggPSBpCiAgICAgICAgICAgIGJyZWFrCiAgICByYXcuY29sdW1ucyA9IHJhdy5pbG9jW2hlYWRlcl9yb3dfaWR4XS5hc3R5cGUoc3RyKS5zdHIuc3RyaXAoKQogICAgZGYgPSByYXdbaGVhZGVyX3Jvd19pZHggKyAxOl0ucmVzZXRfaW5kZXgoZHJvcD1UcnVlKQogICAgcmV0dXJuIGRmW35kZi5pc251bGwoKS5hbGwoYXhpcz0xKV0ucmVzZXRfaW5kZXgoZHJvcD1UcnVlKQoKCmRlZiBfZ2V0X2xhYmVsX2NvbXBvbmVudHNfZnJvbV9zcGVjKGJvbV9kYXRhOiBkaWN0KSAtPiBkaWN0OgogICAgcmVzdWx0ID0ge30KICAgIGNzID0gYm9tX2RhdGEuZ2V0KCJjb2xvcl9zcGVjaWZpY2F0aW9uIikKICAgIGlmIGNzIGlzIE5vbmUgb3IgY3MuZW1wdHk6CiAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgY29tcF9jb2wgPSBjcy5jb2x1bW5zWzBdCiAgICBjb2xvcndheV9jb2xzID0gW2MgZm9yIGMgaW4gY3MuY29sdW1uc1sxOl0gaWYgYyBhbmQgbm90IGMuc3RhcnRzd2l0aCgiY29sXyIpXQogICAgZm9yIF8sIHJvdyBpbiBjcy5pdGVycm93cygpOgogICAgICAgIGNvbXAgPSBzdHIocm93W2NvbXBfY29sXSkuc3RyaXAoKQogICAgICAgIGNvbXBfbG93ZXIgPSBjb21wLmxvd2VyKCkKICAgICAgICBjb2xvcnMgPSB7Y3c6IHN0cihyb3cuZ2V0KGN3LCAiIikpLnN0cmlwKCkgZm9yIGN3IGluIGNvbG9yd2F5X2NvbHMKICAgICAgICAgICAgICAgICAgaWYgc3RyKHJvdy5nZXQoY3csICIiKSkuc3RyaXAoKSBhbmQgc3RyKHJvdy5nZXQoY3csICIiKSkuc3RyaXAoKS5sb3dlcigpIG5vdCBpbiAoIm5vbmUiLCAibmFuIiwgIiIpfQogICAgICAgIGlmICJsYWJlbCBsb2dvIiBpbiBjb21wX2xvd2VyIG9yICJsb2dvIGxhYmVsIiBpbiBjb21wX2xvd2VyOgogICAgICAgICAgICByZXN1bHQuc2V0ZGVmYXVsdCgibGFiZWxfbG9nbyIsIHsiY29tcG9uZW50IjogY29tcCwgImNvbG9ycyI6IGNvbG9yc30pCiAgICAgICAgZWxpZiAibGFiZWwiIGluIGNvbXBfbG93ZXIgYW5kICJjYXJlIiBub3QgaW4gY29tcF9sb3dlcjoKICAgICAgICAgICAgcmVzdWx0LnNldGRlZmF1bHQoIm1haW5fbGFiZWwiLCB7ImNvbXBvbmVudCI6IGNvbXAsICJjb2xvcnMiOiBjb2xvcnN9KQogICAgICAgICAgICByZXN1bHQuc2V0ZGVmYXVsdCgiY2FyZV9sYWJlbCIsIHsiY29tcG9uZW50IjogY29tcCwgImNvbG9ycyI6IGNvbG9yc30pCiAgICByZXR1cm4gcmVzdWx0CgoKZGVmIHJlbmRlcl9jb21wYXJpc29uX3RhYigpOgogICAgcmVuZGVyX3NlY3Rpb25faGVhZGVyKCJCT00gQ29tcGFyaXNvbiAmIFZhbGlkYXRpb24iLCAiQXV0by1maWxsIHRyaW0gJiBsYWJlbCBkYXRhIGZyb20gQk9NIikKCiAgICBib21fZGljdCA9IHN0LnNlc3Npb25fc3RhdGUuZ2V0KCJib21fZGljdCIsIHt9KQogICAgaWYgbm90IGJvbV9kaWN0OgogICAgICAgIHJlbmRlcl93YXJuX2Jhbm5lcigiTm8gQk9NcyBsb2FkZWQuIFVwbG9hZCBDb2x1bWJpYSBCT00gUERGcyBpbiB0aGUgUERGIEV4dHJhY3Rpb24gdGFiIGZpcnN0LiIpCiAgICAgICAgcmV0dXJuCgogICAgcmVuZGVyX2luZm9fYmFubmVyKGYie2xlbihib21fZGljdCl9IEJPTShzKSBsb2FkZWQ6IHsnLCAnLmpvaW4oYm9tX2RpY3Qua2V5cygpKX0g4oCUIGVhY2ggRXhjZWwgcm93IHdpbGwgYmUgbWF0Y2hlZCB0byB0aGUgY29ycmVjdCBCT00gYnkgc3R5bGUgbnVtYmVyLiIpCgogICAgY29tcF9maWxlID0gc3QuZmlsZV91cGxvYWRlcigiRHJvcCB5b3VyIENvbXBhcmlzb24gRXhjZWwgb3IgQ1NWIGhlcmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1bInhsc3giLCAiY3N2IiwgInhscyJdLCBrZXk9ImNtcF91cGxvYWRlciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJDYW4gY29udGFpbiAxMDArIHJvd3MgYW5kIG11bHRpcGxlIHN0eWxlcyDigJQgZWFjaCByb3cgbWF0Y2hlZCBhdXRvbWF0aWNhbGx5IikKCiAgICBpZiBjb21wX2ZpbGUgaXMgTm9uZToKICAgICAgICByZW5kZXJfcmVzdWx0cygpCiAgICAgICAgcmV0dXJuCgogICAgdHJ5OgogICAgICAgIGNvbXBfZGYgPSBfcmVhZF9jb21wYXJpc29uX2ZpbGUoY29tcF9maWxlKQogICAgICAgIHN0LnNlc3Npb25fc3RhdGVbImNvbXBhcmlzb25fcmF3Il0gPSBjb21wX2RmCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgc3QuZXJyb3IoZiJGYWlsZWQgdG8gcmVhZCBmaWxlOiB7ZX0iKQogICAgICAgIHJldHVybgoKICAgIHJlbmRlcl9kaXZpZGVyKCkKICAgIHN0Lm1hcmtkb3duKCIiIjxkaXYgc3R5bGU9ImZvbnQtc2l6ZTowLjY4cmVtO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzowLjFlbTsKICAgICAgICAgICAgICAgIGNvbG9yOiM1YTYwODA7bWFyZ2luLWJvdHRvbTowLjc1cmVtOyI+Q29sdW1uIE1hcHBpbmc8L2Rpdj4iIiIsIHVuc2FmZV9hbGxvd19odG1sPVRydWUpCgogICAgYXV0byA9IGF1dG9fZGV0ZWN0X2NvbHVtbnMoY29tcF9kZikKICAgIGlmIGF1dG8gYW5kIGF1dG9bImNvbmZpZGVuY2UiXSA+PSAwLjc6CiAgICAgICAgZGVmYXVsdF9zdHlsZSA9IGF1dG9bInN0eWxlX2NvbCJdCiAgICAgICAgZGVmYXVsdF9jb2xvciA9IGF1dG9bImNvbG9yX2NvbCJdCiAgICAgICAgcmVuZGVyX2luZm9fYmFubmVyKGYiQXV0by1kZXRlY3RlZDogU3R5bGU9J3tkZWZhdWx0X3N0eWxlfScsIENvbG9yPSd7ZGVmYXVsdF9jb2xvcn0nIikKICAgIGVsc2U6CiAgICAgICAgZGVmYXVsdF9zdHlsZSA9IGxpc3QoY29tcF9kZi5jb2x1bW5zKVswXQogICAgICAgIGRlZmF1bHRfY29sb3IgPSBsaXN0KGNvbXBfZGYuY29sdW1ucylbMV0gaWYgbGVuKGNvbXBfZGYuY29sdW1ucykgPiAxIGVsc2UgbGlzdChjb21wX2RmLmNvbHVtbnMpWzBdCgogICAgY29sX2EsIGNvbF9iID0gc3QuY29sdW1ucygyKQogICAgd2l0aCBjb2xfYToKICAgICAgICBzdHlsZV9jb2wgPSBzdC5zZWxlY3Rib3goIkJ1eWVyIFN0eWxlIE51bWJlciBjb2x1bW4iLCBvcHRpb25zPWxpc3QoY29tcF9kZi5jb2x1bW5zKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PWxpc3QoY29tcF9kZi5jb2x1bW5zKS5pbmRleChkZWZhdWx0X3N0eWxlKSBpZiBkZWZhdWx0X3N0eWxlIGluIGNvbXBfZGYuY29sdW1ucyBlbHNlIDApCiAgICB3aXRoIGNvbF9iOgogICAgICAgIGNvbG9yX2NvbCA9IHN0LnNlbGVjdGJveCgiQ29sb3IgLyBPcHRpb24gY29sdW1uIiwgb3B0aW9ucz1saXN0KGNvbXBfZGYuY29sdW1ucyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleD1saXN0KGNvbXBfZGYuY29sdW1ucykuaW5kZXgoZGVmYXVsdF9jb2xvcikgaWYgZGVmYXVsdF9jb2xvciBpbiBjb21wX2RmLmNvbHVtbnMgZWxzZSAwKQoKICAgICMg4pSA4pSAIExhYmVsIG1hcHBpbmcg4oCUIHVzZSBmaXJzdCBsb2FkZWQgQk9NJ3MgY29sb3Igc3BlYyBmb3IgZHJvcGRvd25zIOKUgOKUgOKUgOKUgOKUgOKUgOKUgAogICAgIyAobGFiZWwgY29tcG9uZW50cyB0ZW5kIHRvIGJlIGNvbnNpc3RlbnQgYWNyb3NzIHN0eWxlczsgdXNlciBjYW4gY2hhbmdlIGlmIG5lZWRlZCkKICAgIGZpcnN0X2JvbSA9IGxpc3QoYm9tX2RpY3QudmFsdWVzKCkpWzBdCiAgICBsYWJlbF9jb21wb25lbnRzID0gX2dldF9sYWJlbF9jb21wb25lbnRzX2Zyb21fc3BlYyhmaXJzdF9ib20pCiAgICBjcyA9IGZpcnN0X2JvbS5nZXQoImNvbG9yX3NwZWNpZmljYXRpb24iKQogICAgaWYgY3MgaXMgbm90IE5vbmUgYW5kIG5vdCBjcy5lbXB0eToKICAgICAgICBjb21wX2NvbF9uYW1lID0gY3MuY29sdW1uc1swXQogICAgICAgIGFsbF9jb21wb25lbnRzID0gW3N0cihyKS5zdHJpcCgpIGZvciByIGluIGNzW2NvbXBfY29sX25hbWVdCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyKHIpLnN0cmlwKCkgYW5kIHN0cihyKS5zdHJpcCgpLmxvd2VyKCkgbm90IGluICgibm9uZSIsICJuYW4iLCAiIildCiAgICAgICAgaWYgYWxsX2NvbXBvbmVudHM6CiAgICAgICAgICAgIGRlZmF1bHRfbWFpbiA9IGxhYmVsX2NvbXBvbmVudHMuZ2V0KCJtYWluX2xhYmVsIiwge30pLmdldCgiY29tcG9uZW50IiwgYWxsX2NvbXBvbmVudHNbMF0pCiAgICAgICAgICAgIGRlZmF1bHRfY2FyZSA9IGxhYmVsX2NvbXBvbmVudHMuZ2V0KCJjYXJlX2xhYmVsIiwge30pLmdldCgiY29tcG9uZW50IiwgYWxsX2NvbXBvbmVudHNbMF0pCgogICAgICAgICAgICBzdC5tYXJrZG93bigiIiI8ZGl2IHN0eWxlPSJmb250LXNpemU6MC42OHJlbTt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6MC4xZW07CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiM1YTYwODA7bWFyZ2luLXRvcDoxcmVtO21hcmdpbi1ib3R0b206MC43NXJlbTsiPkxhYmVsIE1hcHBpbmcgZnJvbSBDb2xvciBTcGVjaWZpY2F0aW9uPC9kaXY+IiIiLAogICAgICAgICAgICAgICAgICAgICAgICB1bnNhZmVfYWxsb3dfaHRtbD1UcnVlKQoKICAgICAgICAgICAgY29sX2MsIGNvbF9kID0gc3QuY29sdW1ucygyKQogICAgICAgICAgICB3aXRoIGNvbF9jOgogICAgICAgICAgICAgICAgbWFpbl9sYWJlbF9jb21wID0gc3Quc2VsZWN0Ym94KCJNYWluIExhYmVsIGNvbXBvbmVudCIsIG9wdGlvbnM9YWxsX2NvbXBvbmVudHMsCiAgICAgICAgICAgICAgICAgICAgaW5kZXg9YWxsX2NvbXBvbmVudHMuaW5kZXgoZGVmYXVsdF9tYWluKSBpZiBkZWZhdWx0X21haW4gaW4gYWxsX2NvbXBvbmVudHMgZWxzZSAwLAogICAgICAgICAgICAgICAgICAgIGtleT0ibWFpbl9sYWJlbF9jb21wX3NlbGVjdCIpCiAgICAgICAgICAgIHdpdGggY29sX2Q6CiAgICAgICAgICAgICAgICBjYXJlX2xhYmVsX2NvbXAgPSBzdC5zZWxlY3Rib3goIkNhcmUgTGFiZWwgY29tcG9uZW50Iiwgb3B0aW9ucz1hbGxfY29tcG9uZW50cywKICAgICAgICAgICAgICAgICAgICBpbmRleD1hbGxfY29tcG9uZW50cy5pbmRleChkZWZhdWx0X2NhcmUpIGlmIGRlZmF1bHRfY2FyZSBpbiBhbGxfY29tcG9uZW50cyBlbHNlIDAsCiAgICAgICAgICAgICAgICAgICAga2V5PSJjYXJlX2xhYmVsX2NvbXBfc2VsZWN0IikKCiAgICAgICAgICAgIGZvciBjb21wX3NlbCwgbGFiZWwgaW4gWyhtYWluX2xhYmVsX2NvbXAsICJNYWluIExhYmVsIiksIChjYXJlX2xhYmVsX2NvbXAsICJDYXJlIExhYmVsIildOgogICAgICAgICAgICAgICAgaWYgY29tcF9zZWw6CiAgICAgICAgICAgICAgICAgICAgcm93X21hdGNoID0gY3NbY3NbY29tcF9jb2xfbmFtZV0gPT0gY29tcF9zZWxdCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHJvd19tYXRjaC5lbXB0eToKICAgICAgICAgICAgICAgICAgICAgICAgY3dfY29scyA9IFtjIGZvciBjIGluIGNzLmNvbHVtbnNbMTpdIGlmIGMgYW5kIG5vdCBjLnN0YXJ0c3dpdGgoImNvbF8iKV0KICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlID0ge2M6IHN0cihyb3dfbWF0Y2guaWxvY1swXS5nZXQoYywgIiIpKS5zdHJpcCgpIGZvciBjIGluIGN3X2NvbHNbOjNdfQogICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGVfc3RyID0gIiwgIi5qb2luKGYie2t9OiB7dn0iIGZvciBrLCB2IGluIHNhbXBsZS5pdGVtcygpIGlmIHYgYW5kIHYubG93ZXIoKSBub3QgaW4gKCJub25lIiwibmFuIiwiIikpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNhbXBsZV9zdHI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJfaW5mb19iYW5uZXIoZiJ7bGFiZWx9IGNvbG9ycyDihpIge3NhbXBsZV9zdHJ9IikKCiAgICAgICAgICAgIHN0LnNlc3Npb25fc3RhdGVbInNlbGVjdGVkX21haW5fbGFiZWxfY29tcCJdID0gbWFpbl9sYWJlbF9jb21wCiAgICAgICAgICAgIHN0LnNlc3Npb25fc3RhdGVbInNlbGVjdGVkX2NhcmVfbGFiZWxfY29tcCJdID0gY2FyZV9sYWJlbF9jb21wCgogICAgcmVuZGVyX2RpdmlkZXIoKQogICAgcmVuZGVyX3RhYmxlX21ldGEoY29tcF9kZikKICAgIHN0LmRhdGFmcmFtZShjb21wX2RmLmhlYWQoMTAwKSwgdXNlX2NvbnRhaW5lcl93aWR0aD1UcnVlLCBoZWlnaHQ9MjgwKQoKICAgICMgU2hvdyB3aGljaCBzdHlsZXMgaW4gdGhlIEV4Y2VsIG1hcCB0byBsb2FkZWQgQk9NcwogICAgcmVuYW1lZF9wcmV2aWV3ID0gY29tcF9kZi5yZW5hbWUoY29sdW1ucz17c3R5bGVfY29sOiAiQnV5ZXIgU3R5bGUgTnVtYmVyIiwgY29sb3JfY29sOiAiQ29sb3IvT3B0aW9uIn0pCiAgICBpZiAiQnV5ZXIgU3R5bGUgTnVtYmVyIiBpbiByZW5hbWVkX3ByZXZpZXcuY29sdW1uczoKICAgICAgICBleGNlbF9zdHlsZXMgPSByZW5hbWVkX3ByZXZpZXdbIkJ1eWVyIFN0eWxlIE51bWJlciJdLmFzdHlwZShzdHIpLnN0ci5zdHJpcCgpLnN0ci51cHBlcigpLnVuaXF1ZSgpCiAgICAgICAgbWF0Y2hlZCAgID0gW3MgZm9yIHMgaW4gZXhjZWxfc3R5bGVzIGlmIGFueShzID09IGIudXBwZXIoKSBvciBzIGluIGIudXBwZXIoKSBvciBiLnVwcGVyKCkgaW4gcyBmb3IgYiBpbiBib21fZGljdCldCiAgICAgICAgdW5tYXRjaGVkID0gW3MgZm9yIHMgaW4gZXhjZWxfc3R5bGVzIGlmIHMgbm90IGluIG1hdGNoZWRdCiAgICAgICAgaWYgbWF0Y2hlZDoKICAgICAgICAgICAgcmVuZGVyX2luZm9fYmFubmVyKGYiTWF0Y2hlZCBzdHlsZXM6IHsnLCAnLmpvaW4obWF0Y2hlZCl9IikKICAgICAgICBpZiB1bm1hdGNoZWQ6CiAgICAgICAgICAgIHJlbmRlcl93YXJuX2Jhbm5lcihmIk5vIEJPTSBmb3VuZCBmb3Igc3R5bGUocyk6IHsnLCAnLmpvaW4odW5tYXRjaGVkKX0g4oCUIHVwbG9hZCB0aGUgbWF0Y2hpbmcgUERGKHMpIikKCiAgICByZW5kZXJfZGl2aWRlcigpCiAgICBpZiBzdC5idXR0b24oIuKWtiBSdW4gVmFsaWRhdGlvbiAmIEF1dG8tRmlsbCIpOgogICAgICAgIHdpdGggc3Quc3Bpbm5lcigiTWF0Y2hpbmcgcm93cyB0byBCT01zIGFuZCBmaWxsaW5nIGNvbHVtbnMuLi4iKToKICAgICAgICAgICAgcmVuYW1lZF9kZiA9IGNvbXBfZGYucmVuYW1lKGNvbHVtbnM9e3N0eWxlX2NvbDogIkJ1eWVyIFN0eWxlIE51bWJlciIsIGNvbG9yX2NvbDogIkNvbG9yL09wdGlvbiJ9KQogICAgICAgICAgICBzZWxlY3RlZF9tYWluID0gc3Quc2Vzc2lvbl9zdGF0ZS5nZXQoInNlbGVjdGVkX21haW5fbGFiZWxfY29tcCIpCiAgICAgICAgICAgIHNlbGVjdGVkX2NhcmUgPSBzdC5zZXNzaW9uX3N0YXRlLmdldCgic2VsZWN0ZWRfY2FyZV9sYWJlbF9jb21wIikKCiAgICAgICAgICAgIHJlc3VsdF9wYXJ0cyA9IFtdCiAgICAgICAgICAgIGZvciBzdHlsZV92YWwsIGdyb3VwX2RmIGluIHJlbmFtZWRfZGYuZ3JvdXBieSgiQnV5ZXIgU3R5bGUgTnVtYmVyIiwgc29ydD1GYWxzZSk6CiAgICAgICAgICAgICAgICBzdHlsZV9zdHIgPSBzdHIoc3R5bGVfdmFsKS5zdHJpcCgpLnVwcGVyKCkKICAgICAgICAgICAgICAgIG1hdGNoZWRfYm9tID0gTm9uZQogICAgICAgICAgICAgICAgZm9yIGJvbV9zdHlsZSwgYm9tIGluIGJvbV9kaWN0Lml0ZW1zKCk6CiAgICAgICAgICAgICAgICAgICAgYnMgPSBzdHIoYm9tX3N0eWxlKS5zdHJpcCgpLnVwcGVyKCkKICAgICAgICAgICAgICAgICAgICBpZiBzdHlsZV9zdHIgPT0gYnMgb3Igc3R5bGVfc3RyIGluIGJzIG9yIGJzIGluIHN0eWxlX3N0cjoKICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZF9ib20gPSBib20KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICAgICBpZiBtYXRjaGVkX2JvbSBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgIGdyb3VwX2RmID0gZ3JvdXBfZGYuY29weSgpCiAgICAgICAgICAgICAgICAgICAgZm9yIGMgaW4gTkVXX0NPTFVNTlM6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGMgbm90IGluIGdyb3VwX2RmLmNvbHVtbnM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cF9kZltjXSA9ICIiCiAgICAgICAgICAgICAgICAgICAgZ3JvdXBfZGZbIlZhbGlkYXRpb24gU3RhdHVzIl0gPSBmIuKdjCBFcnJvcjogTm8gQk9NIGxvYWRlZCBmb3Igc3R5bGUgJ3tzdHlsZV9zdHJ9JyIKICAgICAgICAgICAgICAgICAgICByZXN1bHRfcGFydHMuYXBwZW5kKGdyb3VwX2RmKQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgYm9tX3dpdGhfbGFiZWxzID0gZGljdChtYXRjaGVkX2JvbSkKICAgICAgICAgICAgICAgIGJvbV93aXRoX2xhYmVsc1sic2VsZWN0ZWRfbWFpbl9sYWJlbF9jb21wIl0gPSBzZWxlY3RlZF9tYWluCiAgICAgICAgICAgICAgICBib21fd2l0aF9sYWJlbHNbInNlbGVjdGVkX2NhcmVfbGFiZWxfY29tcCJdID0gc2VsZWN0ZWRfY2FyZQogICAgICAgICAgICAgICAgcmVzdWx0X3BhcnRzLmFwcGVuZCh2YWxpZGF0ZV9hbmRfZmlsbCgKICAgICAgICAgICAgICAgICAgICBjb21wYXJpc29uX2RmPWdyb3VwX2RmLnJlc2V0X2luZGV4KGRyb3A9VHJ1ZSksCiAgICAgICAgICAgICAgICAgICAgYm9tX2RhdGE9Ym9tX3dpdGhfbGFiZWxzLAogICAgICAgICAgICAgICAgKSkKCiAgICAgICAgICAgIHN0LnNlc3Npb25fc3RhdGVbInZhbGlkYXRpb25fcmVzdWx0Il0gPSBwZC5jb25jYXQocmVzdWx0X3BhcnRzLCBpZ25vcmVfaW5kZXg9VHJ1ZSkgaWYgcmVzdWx0X3BhcnRzIGVsc2UgcmVuYW1lZF9kZgoKICAgIHJlbmRlcl9yZXN1bHRzKCkKCgpkZWYgcmVuZGVyX3Jlc3VsdHMoKToKICAgIGlmICJ2YWxpZGF0aW9uX3Jlc3VsdCIgbm90IGluIHN0LnNlc3Npb25fc3RhdGU6CiAgICAgICAgcmV0dXJuCiAgICByZXMgPSBzdC5zZXNzaW9uX3N0YXRlWyJ2YWxpZGF0aW9uX3Jlc3VsdCJdCiAgICByZW5kZXJfZGl2aWRlcigpCiAgICBzdC5tYXJrZG93bigiIiI8ZGl2IHN0eWxlPSJmb250LXNpemU6MC42OHJlbTt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6MC4xZW07CiAgICAgICAgICAgICAgICBjb2xvcjojNWE2MDgwO21hcmdpbi1ib3R0b206MC43NXJlbTsiPlZhbGlkYXRpb24gU3VtbWFyeTwvZGl2PiIiIiwgdW5zYWZlX2FsbG93X2h0bWw9VHJ1ZSkKICAgIHN0YXR1c19jb3VudHMgPSByZXNbIlZhbGlkYXRpb24gU3RhdHVzIl0udmFsdWVfY291bnRzKGRyb3BuYT1GYWxzZSkudG9fZGljdCgpIGlmICJWYWxpZGF0aW9uIFN0YXR1cyIgaW4gcmVzLmNvbHVtbnMgZWxzZSB7fQogICAgb2sgICAgICA9IHN0YXR1c19jb3VudHMuZ2V0KCLinIUgVmFsaWRhdGVkIiwgMCkKICAgIHBhcnRpYWwgPSBzdGF0dXNfY291bnRzLmdldCgi4pqg77iPIFBhcnRpYWwiLCAwKQogICAgZXJyICAgICA9IHN1bSh2IGZvciBrLCB2IGluIHN0YXR1c19jb3VudHMuaXRlbXMoKSBpZiBzdHIoaykuc3RhcnRzd2l0aCgi4p2MIikpCiAgICByZW5kZXJfdmFsaWRhdGlvbl9zdW1tYXJ5KG9rLCBwYXJ0aWFsLCBlcnIsIGxlbihyZXMpKQogICAgcmVuZGVyX3RhYmxlX21ldGEocmVzKQogICAgc3QuZGF0YWZyYW1lKHJlcywgdXNlX2NvbnRhaW5lcl93aWR0aD1UcnVlLCBoZWlnaHQ9NDAwKQogICAgcmVuZGVyX2RpdmlkZXIoKQogICAgYzEsIGMyID0gc3QuY29sdW1ucygyKQogICAgd2l0aCBjMToKICAgICAgICBzdC5kb3dubG9hZF9idXR0b24oIuKshyBFeHBvcnQgUmVzdWx0cyDihpIgQ1NWIiwgZGF0YT1leHBvcnRfdG9fY3N2KHJlcyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVfbmFtZT0idmFsaWRhdGVkX2JvbS5jc3YiLCBtaW1lPSJ0ZXh0L2NzdiIsIHVzZV9jb250YWluZXJfd2lkdGg9VHJ1ZSkKICAgIHdpdGggYzI6CiAgICAgICAgeGxzID0gZXhwb3J0X3RvX2V4Y2VsKHJlc3VsdF9kZj1yZXMsIG9yaWdpbmFsX2RmPXN0LnNlc3Npb25fc3RhdGUuZ2V0KCJjb21wYXJpc29uX3JhdyIsIHBkLkRhdGFGcmFtZSgpKSkKICAgICAgICBzdC5kb3dubG9hZF9idXR0b24oIuKshyBFeHBvcnQgUmVzdWx0cyDihpIgRXhjZWwiLCBkYXRhPXhscywgZmlsZV9uYW1lPSJ2YWxpZGF0ZWRfYm9tLnhsc3giLAogICAgICAgICAgICAgICAgICAgICAgICAgICBtaW1lPSJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZV9jb250YWluZXJfd2lkdGg9VHJ1ZSkKCgojIOKUgOKUgCBNYWluIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgAoKZGVmIG1haW4oKToKICAgIHJlbmRlcl9zaWRlYmFyKCkKICAgIHRhYjEsIHRhYjIgPSBzdC50YWJzKFsiICDwn5OEICBQREYgRXh0cmFjdGlvbiAgIiwgIiAg8J+UjSAgQk9NIENvbXBhcmlzb24gJiBWYWxpZGF0aW9uICAiXSkKICAgIHdpdGggdGFiMToKICAgICAgICByZW5kZXJfcGRmX3RhYigpCiAgICB3aXRoIHRhYjI6CiAgICAgICAgcmVuZGVyX2NvbXBhcmlzb25fdGFiKCkKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBtYWluKCkK',
    'parsers/pdf_parser.py': 'aW1wb3J0IHJlCmltcG9ydCBpbwpmcm9tIHR5cGluZyBpbXBvcnQgRGljdCwgQW55CmltcG9ydCBwYW5kYXMgYXMgcGQKaW1wb3J0IHBkZnBsdW1iZXIKCgpkZWYgX2NsZWFuX3RhYmxlKHJvd3MpOgogICAgY2xlYW5lZCA9IFtdCiAgICBmb3IgciBpbiByb3dzIG9yIFtdOgogICAgICAgIGlmIHIgaXMgTm9uZToKICAgICAgICAgICAgY29udGludWUKICAgICAgICBjbGVhbmVkLmFwcGVuZChbKHN0cihjKS5yZXBsYWNlKCJcbiIsICIgIikuc3RyaXAoKSkgaWYgYyBpcyBub3QgTm9uZSBlbHNlICIiIGZvciBjIGluIHJdKQogICAgcmV0dXJuIGNsZWFuZWQKCgpkZWYgX3Jvd3NfdG9fZGYocm93czogbGlzdCkgLT4gcGQuRGF0YUZyYW1lOgogICAgcm93cyA9IF9jbGVhbl90YWJsZShyb3dzKQogICAgaWYgbm90IHJvd3M6CiAgICAgICAgcmV0dXJuIHBkLkRhdGFGcmFtZSgpCiAgICBiZXN0X2hlYWRlcl9pZHgsIGJlc3RfY291bnQgPSAwLCAwCiAgICBmb3IgaSwgcm93IGluIGVudW1lcmF0ZShyb3dzWzo1XSk6CiAgICAgICAgY291bnQgPSBzdW0oMSBmb3IgYyBpbiByb3cgaWYgYykKICAgICAgICBpZiBjb3VudCA+IGJlc3RfY291bnQ6CiAgICAgICAgICAgIGJlc3RfY291bnQgPSBjb3VudAogICAgICAgICAgICBiZXN0X2hlYWRlcl9pZHggPSBpCiAgICBoZWFkZXJfcm93ID0gcm93c1tiZXN0X2hlYWRlcl9pZHhdCiAgICBudW1fY29scyA9IGxlbihoZWFkZXJfcm93KQogICAgaGVhZGVyLCBzZWVuID0gW10sIHt9CiAgICBmb3IgaSwgYyBpbiBlbnVtZXJhdGUoaGVhZGVyX3Jvdyk6CiAgICAgICAgbmFtZSA9IGMgaWYgYyBlbHNlIGYiY29sX3tpfSIKICAgICAgICBpZiBuYW1lIGluIHNlZW46CiAgICAgICAgICAgIHNlZW5bbmFtZV0gKz0gMQogICAgICAgICAgICBuYW1lID0gZiJ7bmFtZX1fe3NlZW5bbmFtZV19IgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlZW5bbmFtZV0gPSAwCiAgICAgICAgaGVhZGVyLmFwcGVuZChuYW1lKQogICAgZGF0YSA9IFtdCiAgICBmb3Igcm93IGluIHJvd3NbYmVzdF9oZWFkZXJfaWR4ICsgMTpdOgogICAgICAgIGlmIGxlbihyb3cpIDwgbnVtX2NvbHM6CiAgICAgICAgICAgIHJvdyA9IHJvdyArIFsiIl0gKiAobnVtX2NvbHMgLSBsZW4ocm93KSkKICAgICAgICBlbGlmIGxlbihyb3cpID4gbnVtX2NvbHM6CiAgICAgICAgICAgIHJvdyA9IHJvd1s6bnVtX2NvbHNdCiAgICAgICAgZGF0YS5hcHBlbmQocm93KQogICAgZGYgPSBwZC5EYXRhRnJhbWUoZGF0YSwgY29sdW1ucz1oZWFkZXIpCiAgICByZXR1cm4gZGZbfihkZi5lcSgiIikuYWxsKGF4aXM9MSkpXQoKCmRlZiBfZGV0ZWN0X3NlY3Rpb24ocGFnZV90ZXh0OiBzdHIpIC0+IHN0cjoKICAgIHR4dCA9IHBhZ2VfdGV4dC5sb3dlcigpCiAgICBpZiAiY29sb3IgYm9tIiBpbiB0eHQ6ICAgICAgICAgICAgICByZXR1cm4gImNvbG9yX2JvbSIKICAgIGlmICJjb2xvcmxlc3MgYm9tIiBpbiB0eHQ6ICAgICAgICAgcmV0dXJuICJjb2xvcmxlc3NfYm9tIgogICAgaWYgImNvbG9yIHNwZWNpZmljYXRpb24iIGluIHR4dDogICByZXR1cm4gImNvbG9yX3NwZWNpZmljYXRpb24iCiAgICBpZiAiY29zdGluZyIgaW4gdHh0OgogICAgICAgIGlmICJzdW1tYXJ5IiBpbiB0eHQgYW5kICJtYXRlcmlhbCIgbm90IGluIHR4dDoKICAgICAgICAgICAgcmV0dXJuICJjb3N0aW5nX3N1bW1hcnkiCiAgICAgICAgcmV0dXJuICJjb3N0aW5nX2RldGFpbCIKICAgIGlmICJjYXJlIHJlcG9ydCIgaW4gdHh0OiAgICAgICAgICAgcmV0dXJuICJjYXJlX3JlcG9ydCIKICAgIGlmICJjb250ZW50IHJlcG9ydCIgaW4gdHh0OiAgICAgICAgcmV0dXJuICJjb250ZW50X3JlcG9ydCIKICAgIGlmICJtZWFzdXJlbWVudCIgaW4gdHh0OiAgICAgICAgICAgcmV0dXJuICJtZWFzdXJlbWVudHMiCiAgICBpZiAic2FsZXMgc2FtcGxlIiBpbiB0eHQ6ICAgICAgICAgIHJldHVybiAic2FsZXNfc2FtcGxlIgogICAgaWYgImhhbmd0YWciIGluIHR4dDogICAgICAgICAgICAgICByZXR1cm4gImhhbmd0YWdfcmVwb3J0IgogICAgcmV0dXJuICJ1bmtub3duIgoKCmRlZiBfZXh0cmFjdF9tZXRhZGF0YShmaXJzdF9wYWdlX3RleHQ6IHN0cikgLT4gRGljdFtzdHIsIEFueV06CiAgICAiIiJFeHRyYWN0IHN0eWxlLCBzZWFzb24sIGRlc2lnbiwgTE8gZnJvbSBQREYgdGV4dCDigJQgbm8gaGFyZGNvZGVkIGZhbGxiYWNrcy4iIiIKICAgIG1ldGEgPSB7fQogICAgdGV4dCA9IGZpcnN0X3BhZ2VfdGV4dAoKICAgICMgU3R5bGU6IENvbHVtYmlhIGNvZGVzIGxpa2UgQ0wyODgwLCBDVTkyMTksIEFNMTIzNCwgZXRjLgogICAgbSA9IHJlLnNlYXJjaChyJ1xiKFtBLVpdezJ9XGR7NH0pXGInLCB0ZXh0KQogICAgaWYgbToKICAgICAgICBtZXRhWyJzdHlsZSJdID0gbS5ncm91cCgxKQoKICAgICMgU2Vhc29uOiBlLmcuICJTZWFzb246IEYyNSIKICAgIG0gPSByZS5zZWFyY2gocidTZWFzb25bOlxzXSsoW0EtWl1cZCspJywgdGV4dCkKICAgIGlmIG06CiAgICAgICAgbWV0YVsic2Vhc29uIl0gPSBtLmdyb3VwKDEpCgogICAgIyBEZXNpZ246IGUuZy4gIkRlc2lnbjogRjRXQTIwOTI2NCIKICAgIG0gPSByZS5zZWFyY2gocidEZXNpZ25bOlxzXSsoW0EtWjAtOV17NSx9KScsIHRleHQpCiAgICBpZiBtOgogICAgICAgIG1ldGFbImRlc2lnbiJdID0gbS5ncm91cCgxKQoKICAgICMgUHJvZHVjdGlvbiBMTwogICAgbSA9IHJlLnNlYXJjaChyJ1Byb2R1Y3Rpb24gTE9bOlxzXSsoW0EtWmEtel0rKScsIHRleHQpCiAgICBpZiBtOgogICAgICAgIG1ldGFbInByb2R1Y3Rpb25fbG8iXSA9IG0uZ3JvdXAoMSkKCiAgICBtZXRhLnNldGRlZmF1bHQoInN0eWxlIiwgIiIpCiAgICBtZXRhLnNldGRlZmF1bHQoInNlYXNvbiIsICIiKQogICAgbWV0YS5zZXRkZWZhdWx0KCJkZXNpZ24iLCAiIikKICAgIG1ldGEuc2V0ZGVmYXVsdCgicHJvZHVjdGlvbl9sbyIsICIiKQogICAgcmV0dXJuIG1ldGEKCgpkZWYgX2lzX2Nvc3RpbmdfZGV0YWlsX3RhYmxlKHRhYmxlOiBsaXN0KSAtPiBib29sOgogICAgZm9yIHJvdyBpbiB0YWJsZVs6M106CiAgICAgICAgaWYgcm93IGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgcm93X3N0cnMgPSBbc3RyKGMpLnJlcGxhY2UoIlxuIiwgIiAiKS5zdHJpcCgpLmxvd2VyKCkgZm9yIGMgaW4gcm93IGlmIGMgaXMgbm90IE5vbmVdCiAgICAgICAgaWYgIm1hdGVyaWFsIiBpbiByb3dfc3RycyBhbmQgInN1cHBsaWVyIiBpbiByb3dfc3RyczoKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBpZiAiY29tcG9uZW50IiBpbiByb3dfc3RycyBhbmQgIm1hdGVyaWFsIiBpbiByb3dfc3RyczoKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgIHJldHVybiBGYWxzZQoKCmRlZiBwYXJzZV9ib21fcGRmKHBkZl9maWxlX29iaikgLT4gRGljdFtzdHIsIEFueV06CiAgICByZXN1bHQ6IERpY3Rbc3RyLCBBbnldID0geyJtZXRhZGF0YSI6IHt9fQoKICAgIHdpdGggcGRmcGx1bWJlci5vcGVuKHBkZl9maWxlX29iaikgYXMgcGRmOgogICAgICAgIGlmIG5vdCBwZGYucGFnZXM6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlBERiBoYXMgbm8gcGFnZXMiKQoKICAgICAgICBmaXJzdF90ZXh0ID0gcGRmLnBhZ2VzWzBdLmV4dHJhY3RfdGV4dCgpIG9yICIiCiAgICAgICAgcmVzdWx0WyJtZXRhZGF0YSJdID0gX2V4dHJhY3RfbWV0YWRhdGEoZmlyc3RfdGV4dCkKCiAgICAgICAgY29zdGluZ19kZXRhaWxfcm93czogbGlzdCA9IFtdCiAgICAgICAgY29zdGluZ19kZXRhaWxfaGVhZGVyID0gTm9uZQogICAgICAgIHRhYmxlc19ieV9zZWN0aW9uOiBEaWN0W3N0ciwgbGlzdF0gPSB7fQoKICAgICAgICBmb3IgcGFnZSBpbiBwZGYucGFnZXM6CiAgICAgICAgICAgIHRleHQgPSBwYWdlLmV4dHJhY3RfdGV4dCgpIG9yICIiCiAgICAgICAgICAgIHNlY3Rpb24gPSBfZGV0ZWN0X3NlY3Rpb24odGV4dCkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcGFnZV90YWJsZXMgPSBwYWdlLmV4dHJhY3RfdGFibGVzKCkgb3IgW10KICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgICAgIHBhZ2VfdGFibGVzID0gW10KICAgICAgICAgICAgaWYgbm90IHBhZ2VfdGFibGVzOgogICAgICAgICAgICAgICAgbGluZXMgPSBbbC5zdHJpcCgpIGZvciBsIGluIHRleHQuc3BsaXRsaW5lcygpIGlmIGwuc3RyaXAoKV0KICAgICAgICAgICAgICAgIGlmIGxpbmVzOgogICAgICAgICAgICAgICAgICAgIHBhZ2VfdGFibGVzID0gW1tbbGluZV0gZm9yIGxpbmUgaW4gbGluZXNdXQoKICAgICAgICAgICAgZm9yIHRibCBpbiBwYWdlX3RhYmxlczoKICAgICAgICAgICAgICAgIGlmIG5vdCB0Ymw6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGlmIHNlY3Rpb24gPT0gImNvc3RpbmdfZGV0YWlsIiBhbmQgX2lzX2Nvc3RpbmdfZGV0YWlsX3RhYmxlKHRibCk6CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyX2lkeCA9IDAKICAgICAgICAgICAgICAgICAgICBmb3IgcmksIHJvdyBpbiBlbnVtZXJhdGUodGJsWzozXSk6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJvdyBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgcm93X3N0cnMgPSBbc3RyKGMpLnJlcGxhY2UoIlxuIiwgIiAiKS5zdHJpcCgpLmxvd2VyKCkgZm9yIGMgaW4gcm93IGlmIGMgaXMgbm90IE5vbmVdCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICJtYXRlcmlhbCIgaW4gcm93X3N0cnMgYW5kICJzdXBwbGllciIgaW4gcm93X3N0cnM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJfaWR4ID0gcmkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgY2xlYW5lZF9oZWFkZXIgPSBbKHN0cihjKS5yZXBsYWNlKCJcbiIsICIgIikuc3RyaXAoKSBpZiBjIGlzIG5vdCBOb25lIGVsc2UgIiIpIGZvciBjIGluIHRibFtoZWFkZXJfaWR4XV0KICAgICAgICAgICAgICAgICAgICBpZiBjb3N0aW5nX2RldGFpbF9oZWFkZXIgaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgY29zdGluZ19kZXRhaWxfaGVhZGVyID0gY2xlYW5lZF9oZWFkZXIKICAgICAgICAgICAgICAgICAgICBudW1fY29scyA9IGxlbihjb3N0aW5nX2RldGFpbF9oZWFkZXIpCiAgICAgICAgICAgICAgICAgICAgZm9yIHJvdyBpbiB0YmxbaGVhZGVyX2lkeCArIDE6XToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgcm93IGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICBjbGVhbmVkID0gWyhzdHIoYykucmVwbGFjZSgiXG4iLCAiICIpLnN0cmlwKCkgaWYgYyBpcyBub3QgTm9uZSBlbHNlICIiKSBmb3IgYyBpbiByb3ddCiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuZWQgPSAoY2xlYW5lZCArIFsiIl0gKiBudW1fY29scylbOm51bV9jb2xzXQogICAgICAgICAgICAgICAgICAgICAgICBjb3N0aW5nX2RldGFpbF9yb3dzLmFwcGVuZChjbGVhbmVkKQogICAgICAgICAgICAgICAgZWxpZiBzZWN0aW9uID09ICJjb3N0aW5nX2RldGFpbCIgYW5kIGNvc3RpbmdfZGV0YWlsX2hlYWRlcjoKICAgICAgICAgICAgICAgICAgICBudW1fY29scyA9IGxlbihjb3N0aW5nX2RldGFpbF9oZWFkZXIpCiAgICAgICAgICAgICAgICAgICAgZm9yIHJvdyBpbiB0Ymw6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJvdyBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW5lZCA9IFsoc3RyKGMpLnJlcGxhY2UoIlxuIiwgIiAiKS5zdHJpcCgpIGlmIGMgaXMgbm90IE5vbmUgZWxzZSAiIikgZm9yIGMgaW4gcm93XQogICAgICAgICAgICAgICAgICAgICAgICBub25fZW1wdHkgPSBzdW0oMSBmb3IgYyBpbiBjbGVhbmVkIGlmIGMpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vbl9lbXB0eSA8IDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICBmaXJzdF9jZWxsID0gY2xlYW5lZFswXSBpZiBjbGVhbmVkIGVsc2UgIiIKICAgICAgICAgICAgICAgICAgICAgICAgaWYgImNvc3RpbmcgYm9tIiBpbiBmaXJzdF9jZWxsLmxvd2VyKCkgb3IgImxpbmUgc2xvdCIgaW4gZmlyc3RfY2VsbC5sb3dlcigpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW5lZCA9IChjbGVhbmVkICsgWyIiXSAqIG51bV9jb2xzKVs6bnVtX2NvbHNdCiAgICAgICAgICAgICAgICAgICAgICAgIGNvc3RpbmdfZGV0YWlsX3Jvd3MuYXBwZW5kKGNsZWFuZWQpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHRhYmxlc19ieV9zZWN0aW9uLnNldGRlZmF1bHQoc2VjdGlvbiwgW10pLmFwcGVuZCh0YmwpCgogICAgICAgICMgQnVpbGQgY29zdGluZ19kZXRhaWwKICAgICAgICBpZiBjb3N0aW5nX2RldGFpbF9oZWFkZXIgYW5kIGNvc3RpbmdfZGV0YWlsX3Jvd3M6CiAgICAgICAgICAgIGhlYWRlciwgc2VlbiA9IFtdLCB7fQogICAgICAgICAgICBmb3IgYyBpbiBjb3N0aW5nX2RldGFpbF9oZWFkZXI6CiAgICAgICAgICAgICAgICBuYW1lID0gYyBpZiBjIGVsc2UgZiJjb2xfe2xlbihoZWFkZXIpfSIKICAgICAgICAgICAgICAgIGlmIG5hbWUgaW4gc2VlbjoKICAgICAgICAgICAgICAgICAgICBzZWVuW25hbWVdICs9IDEKICAgICAgICAgICAgICAgICAgICBuYW1lID0gZiJ7bmFtZX1fe3NlZW5bbmFtZV19IgogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZWVuW25hbWVdID0gMAogICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZChuYW1lKQogICAgICAgICAgICBkZiA9IHBkLkRhdGFGcmFtZShjb3N0aW5nX2RldGFpbF9yb3dzLCBjb2x1bW5zPWhlYWRlcikKICAgICAgICAgICAgcmVzdWx0WyJjb3N0aW5nX2RldGFpbCJdID0gZGZbfihkZi5lcSgiIikuYWxsKGF4aXM9MSkpXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJlc3VsdFsiY29zdGluZ19kZXRhaWwiXSA9IHBkLkRhdGFGcmFtZSgpCgogICAgICAgIGZvciBzZWN0aW9uLCB0YWJsZXMgaW4gdGFibGVzX2J5X3NlY3Rpb24uaXRlbXMoKToKICAgICAgICAgICAgYWxsX3Jvd3MsIGV4cGVjdGVkX2NvbHMgPSBbXSwgTm9uZQogICAgICAgICAgICBmb3IgdCBpbiB0YWJsZXM6CiAgICAgICAgICAgICAgICBmb3Igcm93IGluIHQ6CiAgICAgICAgICAgICAgICAgICAgaWYgcm93IGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgY2xlYW5lZCA9IFsoc3RyKGMpLnJlcGxhY2UoIlxuIiwgIiAiKS5zdHJpcCgpIGlmIGMgaXMgbm90IE5vbmUgZWxzZSAiIikgZm9yIGMgaW4gcm93XQogICAgICAgICAgICAgICAgICAgIGlmIGV4cGVjdGVkX2NvbHMgaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRfY29scyA9IGxlbihjbGVhbmVkKQogICAgICAgICAgICAgICAgICAgIGNsZWFuZWQgPSAoY2xlYW5lZCArIFsiIl0gKiBleHBlY3RlZF9jb2xzKVs6ZXhwZWN0ZWRfY29sc10KICAgICAgICAgICAgICAgICAgICBhbGxfcm93cy5hcHBlbmQoY2xlYW5lZCkKICAgICAgICAgICAgcmVzdWx0W3NlY3Rpb25dID0gX3Jvd3NfdG9fZGYoYWxsX3Jvd3MpCgogICAgZm9yIGtleSBpbiBbImNvbG9yX2JvbSIsICJjb2xvcmxlc3NfYm9tIiwgImNvbG9yX3NwZWNpZmljYXRpb24iLAogICAgICAgICAgICAgICAgImNvc3Rpbmdfc3VtbWFyeSIsICJjb3N0aW5nX2RldGFpbCIsICJjYXJlX3JlcG9ydCIsCiAgICAgICAgICAgICAgICAiY29udGVudF9yZXBvcnQiLCAibWVhc3VyZW1lbnRzIiwgInNhbGVzX3NhbXBsZSIsICJoYW5ndGFnX3JlcG9ydCJdOgogICAgICAgIHJlc3VsdC5zZXRkZWZhdWx0KGtleSwgcGQuRGF0YUZyYW1lKCkpCgogICAgcmVzdWx0WyJzdXBwbGllcl9sb29rdXAiXSA9IF9idWlsZF9zdXBwbGllcl9sb29rdXAocmVzdWx0LmdldCgiY29zdGluZ19kZXRhaWwiLCBwZC5EYXRhRnJhbWUoKSkpCiAgICByZXR1cm4gcmVzdWx0CgoKZGVmIF9idWlsZF9zdXBwbGllcl9sb29rdXAoY29zdGluZ19kZXRhaWxfZGY6IHBkLkRhdGFGcmFtZSkgLT4gRGljdFtzdHIsIHN0cl06CiAgICBpZiBjb3N0aW5nX2RldGFpbF9kZiBpcyBOb25lIG9yIGNvc3RpbmdfZGV0YWlsX2RmLmVtcHR5OgogICAgICAgIHJldHVybiB7fQogICAgbG9va3VwID0ge30KICAgIGRmID0gY29zdGluZ19kZXRhaWxfZGYuY29weSgpCiAgICBkZi5jb2x1bW5zID0gW3N0cihjKS5sb3dlcigpLnN0cmlwKCkgZm9yIGMgaW4gZGYuY29sdW1uc10KICAgIG1hdGVyaWFsX2NvbCA9IG5leHQoKGMgZm9yIGMgaW4gZGYuY29sdW1ucyBpZiBjID09ICJtYXRlcmlhbCIpLCBOb25lKSBvciBcCiAgICAgICAgICAgICAgICAgICBuZXh0KChjIGZvciBjIGluIGRmLmNvbHVtbnMgaWYgIm1hdGVyaWFsIiBpbiBjKSwgTm9uZSkKICAgIHN1cHBsaWVyX2NvbCA9IG5leHQoKGMgZm9yIGMgaW4gZGYuY29sdW1ucyBpZiBjID09ICJzdXBwbGllciIpLCBOb25lKSBvciBcCiAgICAgICAgICAgICAgICAgICBuZXh0KChjIGZvciBjIGluIGRmLmNvbHVtbnMgaWYgInN1cHBsaWVyIiBpbiBjIG9yICJ2ZW5kb3IiIGluIGMpLCBOb25lKQogICAgaWYgbm90IG1hdGVyaWFsX2NvbCBvciBub3Qgc3VwcGxpZXJfY29sOgogICAgICAgIHJldHVybiB7fQoKICAgIGRlZiBfZml4X3NwbGl0X3dvcmRzKHM6IHN0cikgLT4gc3RyOgogICAgICAgIHByZXYgPSBOb25lCiAgICAgICAgd2hpbGUgcHJldiAhPSBzOgogICAgICAgICAgICBwcmV2ID0gcwogICAgICAgICAgICBzID0gcmUuc3ViKHInKFthLXpdKSAoW2Etel0pJywgbGFtYmRhIG06IG0uZ3JvdXAoMSkgKyBtLmdyb3VwKDIpLCBzKQogICAgICAgIHJldHVybiBzCgogICAgZm9yIF8sIHJvdyBpbiBkZi5pdGVycm93cygpOgogICAgICAgIG1hdCAgPSBzdHIocm93LmdldChtYXRlcmlhbF9jb2wsICcnKSkuc3RyaXAoKQogICAgICAgIHN1cHAgPSBfZml4X3NwbGl0X3dvcmRzKHN0cihyb3cuZ2V0KHN1cHBsaWVyX2NvbCwgJycpKS5zdHJpcCgpKQogICAgICAgIGlmIG5vdCBzdXBwIG9yIHN1cHAubG93ZXIoKSBpbiAoIiIsICJuYW4iLCAibm9uZSIpOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIG0gPSByZS5zZWFyY2gocidcYihcZHszLDZ9KVxiJywgbWF0KQogICAgICAgIGlmIG06CiAgICAgICAgICAgIGxvb2t1cFttLmdyb3VwKDEpXSA9IHN1cHAKICAgICAgICBlbHNlOgogICAgICAgICAgICBkZXNjX2NvbHMgPSBbYyBmb3IgYyBpbiBkZi5jb2x1bW5zIGlmICJkZXNjcmlwdGlvbiIgaW4gY10KICAgICAgICAgICAgZm9yIGRjIGluIGRlc2NfY29sczoKICAgICAgICAgICAgICAgIG0yID0gcmUuc2VhcmNoKHInXGIoXGR7Myw2fSlcYicsIHN0cihyb3cuZ2V0KGRjLCAnJykpKQogICAgICAgICAgICAgICAgaWYgbTI6CiAgICAgICAgICAgICAgICAgICAgbG9va3VwW20yLmdyb3VwKDEpXSA9IHN1cHAKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgcmV0dXJuIGxvb2t1cAo=',
    'parsers/care_content.py': 'aW1wb3J0IHJlCmZyb20gdHlwaW5nIGltcG9ydCBEaWN0CmltcG9ydCBwYW5kYXMgYXMgcGQKCgpfRkFCUklDX1NFQ1RJT05TID0gWwogICAgIkV4Y2x1c2l2ZSBvZiBUcmltbWluZyIsICJGYXV4IEZ1ciIsICJJbnN1bGF0aW9uIiwgIkxpbmluZyIsCiAgICAiRmlsbCIsICJGYWNlIiwgIkJvZHkiLCAiVHJpbSIsICJPdXRlciIsICJJbm5lciIsICJTaGVsbCIsCl0KCgpkZWYgX3BhcnNlX2NvbnRlbnRfaGVhZGVyKGhlYWRlcjogc3RyKSAtPiBkaWN0OgogICAgb3V0ID0geyJjb250ZW50X2NvZGUiOiAiIiwgInNoZWxsIjogIiIsICJmdWxsX2NvbnRlbnQiOiAiIiwgInNlY3Rpb25zIjoge319CiAgICBtID0gcmUuc2VhcmNoKHInQ09OVEVOVCBDT0RFOlxzKihcdyspJywgaGVhZGVyLCByZS5JR05PUkVDQVNFKQogICAgaWYgbToKICAgICAgICBvdXRbImNvbnRlbnRfY29kZSJdID0gbS5ncm91cCgxKS5zdHJpcCgpCiAgICBmdWxsX20gPSByZS5zZWFyY2gocidDT05URU5UIENPREU6XHMqXHcrXHMrKC4qKScsIGhlYWRlciwgcmUuSUdOT1JFQ0FTRSkKICAgIG91dFsiZnVsbF9jb250ZW50Il0gPSBmdWxsX20uZ3JvdXAoMSkuc3RyaXAoKSBpZiBmdWxsX20gZWxzZSAiIgogICAgcGF0ID0gJ3wnLmpvaW4ocmUuZXNjYXBlKHMpIGZvciBzIGluIHNvcnRlZChfRkFCUklDX1NFQ1RJT05TLCBrZXk9bGVuLCByZXZlcnNlPVRydWUpKQogICAgcGFydHMgPSByZS5zcGxpdChyJ1xiKCcgKyBwYXQgKyByJyk6Jywgb3V0WyJmdWxsX2NvbnRlbnQiXSkKICAgIHNlY3Rpb25zID0ge30KICAgIGkgPSAxCiAgICB3aGlsZSBpICsgMSA8IGxlbihwYXJ0cyk6CiAgICAgICAgc2VjdGlvbnNbcGFydHNbaV0uc3RyaXAoKV0gPSBwYXJ0c1tpICsgMV0uc3RyaXAoKS5yc3RyaXAoIiwiKQogICAgICAgIGkgKz0gMgogICAgb3V0WyJzZWN0aW9ucyJdID0gc2VjdGlvbnMKICAgIG91dFsic2hlbGwiXSA9IHNlY3Rpb25zLmdldCgiU2hlbGwiLCAiIikKICAgIHJldHVybiBvdXQKCgpkZWYgZXh0cmFjdF9jb250ZW50X2NvZGVzKGNvbnRlbnRfcmVwb3J0X2RmOiBwZC5EYXRhRnJhbWUpIC0+IERpY3Rbc3RyLCBkaWN0XToKICAgIGlmIGNvbnRlbnRfcmVwb3J0X2RmIGlzIE5vbmUgb3IgY29udGVudF9yZXBvcnRfZGYuZW1wdHk6CiAgICAgICAgcmV0dXJuIHt9CiAgICBkZiA9IGNvbnRlbnRfcmVwb3J0X2RmLmNvcHkoKQogICAgY29scyA9IHtzdHIoYykubG93ZXIoKTogYyBmb3IgYyBpbiBkZi5jb2x1bW5zfQogICAgbnVtX2NvbCA9IGNvbHMuZ2V0KCdjb2xvciB3YXkgbnVtYmVyJykgb3IgY29scy5nZXQoJ2NvbG9yd2F5IG51bWJlcicpIG9yIE5vbmUKICAgIHJlc3VsdCA9IHt9CiAgICBjdXJyZW50X3BhcnNlZCA9IE5vbmUKICAgIGZvciBjb2wgaW4gZGYuY29sdW1uczoKICAgICAgICBjb2xfc3RyID0gc3RyKGNvbCkuc3RyaXAoKQogICAgICAgIGlmICJDT05URU5UIENPREUiIGluIGNvbF9zdHIudXBwZXIoKSBhbmQgbGVuKGNvbF9zdHIpID4gMTU6CiAgICAgICAgICAgIHAgPSBfcGFyc2VfY29udGVudF9oZWFkZXIoY29sX3N0cikKICAgICAgICAgICAgaWYgcFsiY29udGVudF9jb2RlIl06CiAgICAgICAgICAgICAgICBjdXJyZW50X3BhcnNlZCA9IHAKICAgICAgICAgICAgYnJlYWsKICAgIGZvciBfLCByb3cgaW4gZGYuaXRlcnJvd3MoKToKICAgICAgICBmb3IgY2VsbCBpbiByb3c6CiAgICAgICAgICAgIGNlbGxfc3RyID0gc3RyKGNlbGwpLnN0cmlwKCkKICAgICAgICAgICAgaWYgIkNPTlRFTlQgQ09ERSIgaW4gY2VsbF9zdHIudXBwZXIoKSBhbmQgbGVuKGNlbGxfc3RyKSA+IDE1OgogICAgICAgICAgICAgICAgcCA9IF9wYXJzZV9jb250ZW50X2hlYWRlcihjZWxsX3N0cikKICAgICAgICAgICAgICAgIGlmIHBbImNvbnRlbnRfY29kZSJdOgogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfcGFyc2VkID0gcAogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBpZiBjdXJyZW50X3BhcnNlZCBpcyBOb25lOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGNvbG9yd2F5X2tleSA9IE5vbmUKICAgICAgICBpZiBudW1fY29sOgogICAgICAgICAgICB2ID0gc3RyKHJvdy5nZXQobnVtX2NvbCwgIiIpKS5zdHJpcCgpCiAgICAgICAgICAgIGlmIHJlLm1hdGNoKHIiXlxkezN9JCIsIHYpOgogICAgICAgICAgICAgICAgY29sb3J3YXlfa2V5ID0gdgogICAgICAgIGlmIG5vdCBjb2xvcndheV9rZXk6CiAgICAgICAgICAgIGZvciBjZWxsIGluIHJvdzoKICAgICAgICAgICAgICAgIGlmIHJlLm1hdGNoKHIiXlxkezN9JCIsIHN0cihjZWxsKS5zdHJpcCgpKToKICAgICAgICAgICAgICAgICAgICBjb2xvcndheV9rZXkgPSBzdHIoY2VsbCkuc3RyaXAoKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgaWYgY29sb3J3YXlfa2V5OgogICAgICAgICAgICByZXN1bHRbY29sb3J3YXlfa2V5XSA9IHsKICAgICAgICAgICAgICAgICJjb250ZW50X2NvZGUiOiBjdXJyZW50X3BhcnNlZFsiY29udGVudF9jb2RlIl0sCiAgICAgICAgICAgICAgICAic2hlbGwiOiAgICAgICAgY3VycmVudF9wYXJzZWRbInNoZWxsIl0sCiAgICAgICAgICAgICAgICAiZnVsbF9jb250ZW50IjogY3VycmVudF9wYXJzZWRbImZ1bGxfY29udGVudCJdLAogICAgICAgICAgICAgICAgInNlY3Rpb25zIjogICAgIGN1cnJlbnRfcGFyc2VkWyJzZWN0aW9ucyJdLAogICAgICAgICAgICB9CiAgICByZXR1cm4gcmVzdWx0CgoKZGVmIGV4dHJhY3RfY2FyZV9jb2RlcyhjYXJlX3JlcG9ydF9kZjogcGQuRGF0YUZyYW1lKSAtPiBEaWN0W3N0ciwgZGljdF06CiAgICBpZiBjYXJlX3JlcG9ydF9kZiBpcyBOb25lIG9yIGNhcmVfcmVwb3J0X2RmLmVtcHR5OgogICAgICAgIHJldHVybiB7fQogICAgZGYgPSBjYXJlX3JlcG9ydF9kZi5jb3B5KCkKICAgIGNvbHMgPSB7c3RyKGMpLmxvd2VyKCk6IGMgZm9yIGMgaW4gZGYuY29sdW1uc30KICAgIG51bV9jb2wgID0gY29scy5nZXQoJ2NvbG9yIHdheSBudW1iZXInKSBvciBjb2xzLmdldCgnY29sb3J3YXkgbnVtYmVyJykgb3IgTm9uZQogICAgbmFtZV9jb2wgPSBjb2xzLmdldCgnY29sb3Igd2F5IG5hbWUnKSAgIG9yIGNvbHMuZ2V0KCdjb2xvcndheSBuYW1lJykgICBvciBOb25lCiAgICBjb2RlX2NvbCA9IGNvbHMuZ2V0KCdjYXJlIGNvZGUnKSAgICAgICAgb3IgY29scy5nZXQoJ2NvZGUnKSAgICAgICAgICAgIG9yIE5vbmUKICAgIGVuZ19jb2wgPSBOb25lCiAgICBmb3IgYyBpbiBkZi5jb2x1bW5zOgogICAgICAgIGlmICdlbmdsaXNoJyBpbiBjLmxvd2VyKCkgYW5kICdpbnN0cnVjdGlvbicgaW4gYy5sb3dlcigpOgogICAgICAgICAgICBlbmdfY29sID0gYwogICAgICAgICAgICBicmVhawogICAgaWYgbm90IGVuZ19jb2w6CiAgICAgICAgZm9yIGMgaW4gZGYuY29sdW1uczoKICAgICAgICAgICAgaWYgJ2luc3RydWN0aW9uJyBpbiBjLmxvd2VyKCk6CiAgICAgICAgICAgICAgICBlbmdfY29sID0gYwogICAgICAgICAgICAgICAgYnJlYWsKICAgIGhlYWRlcl9jYXJlX2NvZGUgPSAiIgogICAgaGVhZGVyX2VuZ2xpc2ggPSAiIgogICAgZm9yIGNvbCBpbiBkZi5jb2x1bW5zOgogICAgICAgIGNvbF9zdHIgPSBzdHIoY29sKQogICAgICAgIGlmICJDYXJlIENvZGUiIGluIGNvbF9zdHI6CiAgICAgICAgICAgIG0gPSByZS5zZWFyY2gocidDYXJlIENvZGVbOlxzXSsoXFMrKScsIGNvbF9zdHIsIHJlLklHTk9SRUNBU0UpCiAgICAgICAgICAgIGlmIG06CiAgICAgICAgICAgICAgICBoZWFkZXJfY2FyZV9jb2RlID0gbS5ncm91cCgxKS5zdHJpcCgpCiAgICAgICAgICAgIGluc3RyX2NvbCA9IGRmLmNvbHVtbnNbMV0gaWYgbGVuKGRmLmNvbHVtbnMpID4gMSBlbHNlIE5vbmUKICAgICAgICAgICAgZm9yIF8sIHJvdyBpbiBkZi5pdGVycm93cygpOgogICAgICAgICAgICAgICAgbGFuZyA9IHN0cihyb3cuaWxvY1swXSkuc3RyaXAoKS5sb3dlcigpCiAgICAgICAgICAgICAgICBpZiBsYW5nID09ICJlbmdsaXNoIiBhbmQgaW5zdHJfY29sOgogICAgICAgICAgICAgICAgICAgIGhlYWRlcl9lbmdsaXNoID0gc3RyKHJvdy5nZXQoaW5zdHJfY29sLCAiIikpLnN0cmlwKCkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBicmVhawogICAgcmVzdWx0ID0ge30KICAgIGZvciBfLCByb3cgaW4gZGYuaXRlcnJvd3MoKToKICAgICAgICBrZXkgPSBzdHIocm93LmdldChudW1fY29sKSBvciByb3cuZ2V0KG5hbWVfY29sKSBvciAiIikuc3RyaXAoKQogICAgICAgIGlmIG5vdCBrZXkgb3Igbm90IHJlLm1hdGNoKHIiXlxkezN9JCIsIGtleSk6CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgcmVzdWx0W2tleV0gPSB7CiAgICAgICAgICAgICJjYXJlX2NvZGUiOiAgICAgICAgICAgIHN0cihyb3cuZ2V0KGNvZGVfY29sLCAiIikpLnN0cmlwKCkgaWYgY29kZV9jb2wgZWxzZSBoZWFkZXJfY2FyZV9jb2RlLAogICAgICAgICAgICAiZW5nbGlzaF9pbnN0cnVjdGlvbnMiOiBzdHIocm93LmdldChlbmdfY29sLCAgIiIpKS5zdHJpcCgpIGlmIGVuZ19jb2wgIGVsc2UgaGVhZGVyX2VuZ2xpc2gsCiAgICAgICAgfQogICAgICAgIGlmIG5vdCByZXN1bHRba2V5XVsiY2FyZV9jb2RlIl06CiAgICAgICAgICAgIHJlc3VsdFtrZXldWyJjYXJlX2NvZGUiXSA9IGhlYWRlcl9jYXJlX2NvZGUKICAgICAgICBpZiBub3QgcmVzdWx0W2tleV1bImVuZ2xpc2hfaW5zdHJ1Y3Rpb25zIl06CiAgICAgICAgICAgIHJlc3VsdFtrZXldWyJlbmdsaXNoX2luc3RydWN0aW9ucyJdID0gaGVhZGVyX2VuZ2xpc2gKICAgIGlmIG5vdCByZXN1bHQgYW5kIGhlYWRlcl9jYXJlX2NvZGU6CiAgICAgICAgZm9yIF8sIHJvdyBpbiBkZi5pdGVycm93cygpOgogICAgICAgICAgICBmb3IgY2VsbCBpbiByb3c6CiAgICAgICAgICAgICAgICBpZiByZS5tYXRjaChyIl5cZHszfSQiLCBzdHIoY2VsbCkuc3RyaXAoKSk6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3N0cihjZWxsKS5zdHJpcCgpXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgImNhcmVfY29kZSI6IGhlYWRlcl9jYXJlX2NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICJlbmdsaXNoX2luc3RydWN0aW9ucyI6IGhlYWRlcl9lbmdsaXNoLAogICAgICAgICAgICAgICAgICAgIH0KICAgIHJldHVybiByZXN1bHQK',
    'validators/matcher.py': 'ZnJvbSB0eXBpbmcgaW1wb3J0IE9wdGlvbmFsLCBMaXN0LCBEaWN0CmltcG9ydCByZQppbXBvcnQgcGFuZGFzIGFzIHBkCgojIE5vIGhhcmRjb2RlZCBjb2xvcndheXMgLSBhbGwgcmVzb2x2ZWQgZHluYW1pY2FsbHkgZnJvbSBCT00gUERGCkNPTVBPTkVOVF9BTElBU0VTID0gewogICAgIkxhYmVsIDEiOiAgICAgICAgICAgICAgWyJtYWluIGxhYmVsIiwgImxhYmVsMSIsICJsYWJlbCAxIiwgImNhcmUgbGFiZWwiXSwKICAgICJMYWJlbCBMb2dvIDEiOiAgICAgICAgIFsibG9nbyBsYWJlbCIsICJsYWJlbCBsb2dvIiwgImxvZ28gMSIsICJhZGRpdGlvbmFsIG1haW4gbGFiZWwiXSwKICAgICJTaGVsbCAxIjogICAgICAgICAgICAgIFsic2hlbGwiLCAibWFpbiBzaGVsbCIsICJzaGVsbDEiLCAic2hlbGwgMSJdLAogICAgIlNoZWxsIDIiOiAgICAgICAgICAgICAgWyJmYXV4IGZ1ciIsICJmdXIgc2hlbGwiLCAic2hlbGwgMiIsICJzaGVsbDIiXSwKICAgICJJbnN1bGF0aW9uIDEiOiAgICAgICAgIFsiaW5zdWxhdGlvbiIsICJmaWxsIiwgInBvbXBvbSIsICJwb20gcG9tIl0sCiAgICAiSGFuZ3RhZyBQYWNrYWdlIFBhcnQiOiBbImhhbmd0YWciLCAiaGFuZyB0YWciLCAiaHQiXSwKICAgICJQYWNrYWdpbmcgMSI6ICAgICAgICAgIFsic3dpbmcgaG9vayIsICJkaC1ibG0iLCAicGFja2FnaW5nIDEiXSwKICAgICJQYWNrYWdpbmcgMiI6ICAgICAgICAgIFsicG9seWJhZyIsICJwb2x5IGJhZyIsICJwYWNrYWdpbmcgMiJdLAogICAgIlBhY2thZ2luZyAzIjogICAgICAgICAgWyJ1cGMgc3RpY2tlciIsICJ1cGMgYmFnIHN0aWNrZXIiLCAicGFja2FnaW5nIDMiXSwKICAgICJQYWNrYWdpbmcgNCI6ICAgICAgICAgIFsib3V0ZXIgY2FydG9uIiwgImNhcnRvbiIsICJwYWNrYWdpbmcgNCJdLAp9CgoKZGVmIGF1dG9fZGV0ZWN0X2NvbHVtbnMoZGY6IHBkLkRhdGFGcmFtZSkgLT4gT3B0aW9uYWxbRGljdFtzdHIsIHN0cl1dOgogICAgY29sc19sb3dlciA9IHtjLmxvd2VyKCk6IGMgZm9yIGMgaW4gZGYuY29sdW1uc30KICAgIHN0eWxlX2NvbCA9IE5vbmUKICAgIGZvciBwYXR0ZXJuIGluIFsic3R5bGUiLCAiYnV5ZXIgc3R5bGUiLCAiaXRlbSIsICJza3UiLCAicHJvZHVjdCBjb2RlIiwgImFydGljbGUiXToKICAgICAgICBmb3IgbG93ZXJfY29sLCBvcmlnaW5hbF9jb2wgaW4gY29sc19sb3dlci5pdGVtcygpOgogICAgICAgICAgICBpZiBwYXR0ZXJuIGluIGxvd2VyX2NvbDoKICAgICAgICAgICAgICAgIHN0eWxlX2NvbCA9IG9yaWdpbmFsX2NvbAogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBpZiBzdHlsZV9jb2w6CiAgICAgICAgICAgIGJyZWFrCiAgICBjb2xvcl9jb2wgPSBOb25lCiAgICBmb3IgcGF0dGVybiBpbiBbImNvbG9yIiwgIm9wdGlvbiIsICJjb2xvcndheSIsICJ2YXJpYW50IiwgInNoYWRlIl06CiAgICAgICAgZm9yIGxvd2VyX2NvbCwgb3JpZ2luYWxfY29sIGluIGNvbHNfbG93ZXIuaXRlbXMoKToKICAgICAgICAgICAgaWYgcGF0dGVybiBpbiBsb3dlcl9jb2wgYW5kICJkZXNjcmlwdGlvbiIgbm90IGluIGxvd2VyX2NvbDoKICAgICAgICAgICAgICAgIGNvbG9yX2NvbCA9IG9yaWdpbmFsX2NvbAogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBpZiBjb2xvcl9jb2w6CiAgICAgICAgICAgIGJyZWFrCiAgICBpZiBzdHlsZV9jb2wgYW5kIGNvbG9yX2NvbDoKICAgICAgICByZXR1cm4geyJzdHlsZV9jb2wiOiBzdHlsZV9jb2wsICJjb2xvcl9jb2wiOiBjb2xvcl9jb2wsICJjb25maWRlbmNlIjogMC45fQogICAgZWxpZiBzdHlsZV9jb2wgb3IgY29sb3JfY29sOgogICAgICAgIHJldHVybiB7InN0eWxlX2NvbCI6IHN0eWxlX2NvbCwgImNvbG9yX2NvbCI6IGNvbG9yX2NvbCwgImNvbmZpZGVuY2UiOiAwLjV9CiAgICByZXR1cm4gTm9uZQoKCmRlZiBub3JtYWxpemVfY29sb3J3YXkoY29sb3Jfb3B0aW9uX3ZhbHVlOiBzdHIsIGF2YWlsYWJsZV9jb2xvcndheXM6IE9wdGlvbmFsW0xpc3Rbc3RyXV0gPSBOb25lKSAtPiBPcHRpb25hbFtzdHJdOgogICAgIiIiTWFwIGFueSBjb2xvcndheSBpbnB1dCB0byB0aGUgZnVsbCBjYW5vbmljYWwgbmFtZSBmcm9tIEJPTSAoZS5nLiAnMDEwLUJsYWNrJykuIiIiCiAgICBpZiBub3QgY29sb3Jfb3B0aW9uX3ZhbHVlIG9yIG5vdCBhdmFpbGFibGVfY29sb3J3YXlzOgogICAgICAgIHJldHVybiBOb25lCiAgICB2YWwgPSBzdHIoY29sb3Jfb3B0aW9uX3ZhbHVlKS5zdHJpcCgpCiAgICB2YWxfbG93ZXIgPSB2YWwubG93ZXIoKQoKICAgICMgMS4gRXhhY3QgbWF0Y2gKICAgIGlmIHZhbCBpbiBhdmFpbGFibGVfY29sb3J3YXlzOgogICAgICAgIHJldHVybiB2YWwKICAgICMgMi4gQ2FzZS1pbnNlbnNpdGl2ZQogICAgZm9yIGN3IGluIGF2YWlsYWJsZV9jb2xvcndheXM6CiAgICAgICAgaWYgY3cubG93ZXIoKSA9PSB2YWxfbG93ZXI6CiAgICAgICAgICAgIHJldHVybiBjdwogICAgIyAzLiBTdGFydHMgd2l0aCBudW1iZXIgcHJlZml4IGUuZy4gIjAxMCIgb3IgIjAxMC1CbGFjayIKICAgIGZvciBjdyBpbiBhdmFpbGFibGVfY29sb3J3YXlzOgogICAgICAgIHByZWZpeCA9IGN3LnNwbGl0KCItIilbMF0uc3RyaXAoKQogICAgICAgIGlmIHZhbF9sb3dlci5zdGFydHN3aXRoKHByZWZpeC5sb3dlcigpKToKICAgICAgICAgICAgcmV0dXJuIGN3CiAgICAjIDQuIFN1YnN0cmluZyBtYXRjaCBvbiBjb2xvciBuYW1lIHBhcnQKICAgIGZvciBjdyBpbiBhdmFpbGFibGVfY29sb3J3YXlzOgogICAgICAgIGNvbG9yX25hbWUgPSBjdy5zcGxpdCgiLSIsIDEpWzFdLmxvd2VyKCkgaWYgIi0iIGluIGN3IGVsc2UgY3cubG93ZXIoKQogICAgICAgIGlmIHZhbF9sb3dlciBpbiBjb2xvcl9uYW1lIG9yIGNvbG9yX25hbWUgaW4gdmFsX2xvd2VyOgogICAgICAgICAgICByZXR1cm4gY3cKICAgICMgNS4gUGFydGlhbCB3b3JkIG1hdGNoCiAgICB2YWxfd29yZHMgPSBzZXQodmFsX2xvd2VyLnNwbGl0KCkpCiAgICBmb3IgY3cgaW4gYXZhaWxhYmxlX2NvbG9yd2F5czoKICAgICAgICBjd193b3JkcyA9IHNldChjdy5sb3dlcigpLnJlcGxhY2UoIi0iLCAiICIpLnNwbGl0KCkpCiAgICAgICAgaWYgdmFsX3dvcmRzICYgY3dfd29yZHM6CiAgICAgICAgICAgIHJldHVybiBjdwogICAgcmV0dXJuIE5vbmUKCgpkZWYgbm9ybWFsaXplX2NvbXBvbmVudChjb21wb25lbnRfbmFtZTogc3RyKSAtPiBzdHI6CiAgICBpZiBub3QgY29tcG9uZW50X25hbWU6CiAgICAgICAgcmV0dXJuIGNvbXBvbmVudF9uYW1lCiAgICBuZWVkbGUgPSBjb21wb25lbnRfbmFtZS5zdHJpcCgpLmxvd2VyKCkKICAgIGZvciBjYW5vbmljYWwsIGFsaWFzZXMgaW4gQ09NUE9ORU5UX0FMSUFTRVMuaXRlbXMoKToKICAgICAgICBpZiBuZWVkbGUgPT0gY2Fub25pY2FsLmxvd2VyKCk6CiAgICAgICAgICAgIHJldHVybiBjYW5vbmljYWwKICAgICAgICBmb3IgYWxpYXMgaW4gYWxpYXNlczoKICAgICAgICAgICAgaWYgbmVlZGxlID09IGFsaWFzIG9yIGFsaWFzIGluIG5lZWRsZSBvciBuZWVkbGUgaW4gYWxpYXM6CiAgICAgICAgICAgICAgICByZXR1cm4gY2Fub25pY2FsCiAgICByZXR1cm4gY29tcG9uZW50X25hbWUKCgpkZWYgZXh0cmFjdF9tYXRlcmlhbF9jb2RlKHRleHQ6IHN0cikgLT4gc3RyOgogICAgaWYgbm90IHRleHQ6CiAgICAgICAgcmV0dXJuICIiCiAgICBtYXRjaGVzID0gcmUuZmluZGFsbChyJ1xiKFxkezMsNn0pXGInLCBzdHIodGV4dCkpCiAgICByZXR1cm4gbWF0Y2hlc1swXSBpZiBtYXRjaGVzIGVsc2UgIiIKCgpkZWYgZXh0cmFjdF9pZF9vbmx5KHZhbHVlOiBzdHIpIC0+IHN0cjoKICAgIGlmIG5vdCB2YWx1ZSBvciB2YWx1ZSA9PSAiTi9BIjoKICAgICAgICByZXR1cm4gdmFsdWUKICAgIHRleHQgPSBzdHIodmFsdWUpLnN0cmlwKCkKICAgIGlmIG5vdCB0ZXh0OgogICAgICAgIHJldHVybiAiTi9BIgogICAgZmlyc3RfdG9rZW4gPSB0ZXh0LnNwbGl0KClbMF0gaWYgdGV4dC5zcGxpdCgpIGVsc2UgdGV4dAogICAgcmV0dXJuIGZpcnN0X3Rva2VuLnJzdHJpcCgnLiw7Oi0oKScpCg==',
    'validators/filler.py': 'ZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QsIEFueQppbXBvcnQgcGFuZGFzIGFzIHBkCgpmcm9tIHBhcnNlcnMuY29sb3JfYm9tIGltcG9ydCBleHRyYWN0X2NvbG9yX2JvbV9sb29rdXAKZnJvbSBwYXJzZXJzLmNvc3RpbmcgaW1wb3J0IGZpbmRfc3VwcGxpZXJfYnlfY29kZQpmcm9tIHBhcnNlcnMuY2FyZV9jb250ZW50IGltcG9ydCBleHRyYWN0X2NhcmVfY29kZXMsIGV4dHJhY3RfY29udGVudF9jb2Rlcwpmcm9tIHZhbGlkYXRvcnMubWF0Y2hlciBpbXBvcnQgbm9ybWFsaXplX2NvbG9yd2F5LCBleHRyYWN0X21hdGVyaWFsX2NvZGUsIGV4dHJhY3RfaWRfb25seQoKTkVXX0NPTFVNTlMgPSBbCiAgICAiTWFpbiBMYWJlbCIsICJNYWluIExhYmVsIENvbG9yIiwgIk1haW4gTGFiZWwgU3VwcGxpZXIiLAogICAgIkFkZGl0aW9uYWwgTWFpbiBMYWJlbCIsICJBZGRpdGlvbmFsIE1haW4gTGFiZWwgQ29sb3IiLAogICAgIkNhcmUgTGFiZWwiLCAiQ2FyZSBMYWJlbCBDb2xvciIsICJDYXJlIExhYmVsIFN1cHBsaWVyIiwKICAgICJDb250ZW50IENvZGUiLCAiVFAgRkMiLCAiQ2FyZSBDb2RlIiwKICAgICJIYW5ndGFnIiwgIkhhbmd0YWcgU3VwcGxpZXIiLAogICAgIkhhbmd0YWcgKFJGSUQpIiwgIkhhbmd0YWcgKFJGSUQpIFN1cHBsaWVyIiwKICAgICJSRklEIFN0aWNrZXIiLCAiUkZJRCBTdGlja2VyIFN1cHBsaWVyIiwKICAgICJVUEMgU3RpY2tlciAoUG9seWJhZykiLCAiVVBDIFN0aWNrZXIgU3VwcGxpZXIiLAogICAgIlZhbGlkYXRpb24gU3RhdHVzIiwKXQoKCmRlZiBfbm9ybWFsaXplX3ZhbHVlKHZhbDogQW55KSAtPiBzdHI6CiAgICBzID0gc3RyKHZhbCkuc3RyaXAoKQogICAgaWYgbm90IHMgb3Igcy5sb3dlcigpIGluICgibm9uZSIsICJuYW4iLCAiIik6CiAgICAgICAgcmV0dXJuICJOL0EiCiAgICByZXR1cm4gcwoKCmRlZiB2YWxpZGF0ZV9hbmRfZmlsbChjb21wYXJpc29uX2RmOiBwZC5EYXRhRnJhbWUsIGJvbV9kYXRhOiBEaWN0W3N0ciwgQW55XSkgLT4gcGQuRGF0YUZyYW1lOgogICAgcmVzdWx0ID0gY29tcGFyaXNvbl9kZi5jb3B5KCkKCiAgICBjb2xvcl9ib21fbG9va3VwID0gZXh0cmFjdF9jb2xvcl9ib21fbG9va3VwKGJvbV9kYXRhLmdldCgiY29sb3JfYm9tIiwgcGQuRGF0YUZyYW1lKCkpKQogICAgY2FyZV9jb2RlcyAgICAgICA9IGV4dHJhY3RfY2FyZV9jb2Rlcyhib21fZGF0YS5nZXQoImNhcmVfcmVwb3J0IiwgcGQuRGF0YUZyYW1lKCkpKQogICAgY29udGVudF9jb2RlcyAgICA9IGV4dHJhY3RfY29udGVudF9jb2Rlcyhib21fZGF0YS5nZXQoImNvbnRlbnRfcmVwb3J0IiwgcGQuRGF0YUZyYW1lKCkpKQogICAgY29tcG9uZW50cyAgICAgICA9IGNvbG9yX2JvbV9sb29rdXAuZ2V0KCJjb21wb25lbnRzIiwge30pCiAgICBzYXBfY29kZXMgICAgICAgID0gY29sb3JfYm9tX2xvb2t1cC5nZXQoIlNBUF9jb2RlcyIsIHt9KQogICAgYXZhaWxhYmxlX2N3ICAgICA9IGxpc3Qoc2FwX2NvZGVzLmtleXMoKSkgaWYgc2FwX2NvZGVzIGVsc2UgW10KICAgIHN1cHBsaWVyX2xvb2t1cCAgPSBib21fZGF0YS5nZXQoInN1cHBsaWVyX2xvb2t1cCIsIHt9KQogICAgYm9tX3N0eWxlICAgICAgICA9IHN0cihib21fZGF0YS5nZXQoIm1ldGFkYXRhIiwge30pLmdldCgic3R5bGUiLCAiIikpLnN0cmlwKCkudXBwZXIoKQoKICAgIGZvciBjb2wgaW4gTkVXX0NPTFVNTlM6CiAgICAgICAgaWYgY29sIG5vdCBpbiByZXN1bHQuY29sdW1uczoKICAgICAgICAgICAgcmVzdWx0W2NvbF0gPSAiIgoKICAgIGZvciBpZHgsIHJvdyBpbiByZXN1bHQuaXRlcnJvd3MoKToKICAgICAgICBidXllcl9zdHlsZSA9IHN0cihyb3cuZ2V0KCJCdXllciBTdHlsZSBOdW1iZXIiLCAiIikpLnN0cmlwKCkudXBwZXIoKQogICAgICAgIGlmIGJ1eWVyX3N0eWxlIGFuZCBib21fc3R5bGUgYW5kIGJ1eWVyX3N0eWxlICE9IGJvbV9zdHlsZToKICAgICAgICAgICAgaWYgbm90IChidXllcl9zdHlsZSBpbiBib21fc3R5bGUgb3IgYm9tX3N0eWxlIGluIGJ1eWVyX3N0eWxlKToKICAgICAgICAgICAgICAgIHJlc3VsdC5hdFtpZHgsICJWYWxpZGF0aW9uIFN0YXR1cyJdID0gZiLinYwgRXJyb3I6IFN0eWxlIG1pc21hdGNoICh7YnV5ZXJfc3R5bGV9IHZzIHtib21fc3R5bGV9KSIKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGNvbG9yX3JhdyAgPSBzdHIocm93LmdldCgiQ29sb3IvT3B0aW9uIiwgIiIpKS5zdHJpcCgpCiAgICAgICAgbWF0Y2hlZF9jdyA9IG5vcm1hbGl6ZV9jb2xvcndheShjb2xvcl9yYXcsIGF2YWlsYWJsZV9jdykKICAgICAgICBpZiBub3QgbWF0Y2hlZF9jdzoKICAgICAgICAgICAgcmVzdWx0LmF0W2lkeCwgIlZhbGlkYXRpb24gU3RhdHVzIl0gPSBmIuKdjCBFcnJvcjogVW5rbm93biBjb2xvcndheSAne2NvbG9yX3Jhd30nIgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICBjb2xvcndheV9udW0gPSBtYXRjaGVkX2N3LnNwbGl0KCItIilbMF0uc3RyaXAoKSBpZiAiLSIgaW4gbWF0Y2hlZF9jdyBlbHNlIG1hdGNoZWRfY3cuc3BsaXQoKVswXSBpZiAiICIgaW4gbWF0Y2hlZF9jdyBlbHNlIG1hdGNoZWRfY3cKCiAgICAgICAgZGVmIF9nZXRfY29tcChjb21wX2tleSwgc3ViKToKICAgICAgICAgICAgY29tcCA9IGNvbXBvbmVudHMuZ2V0KGNvbXBfa2V5LCB7fSkKICAgICAgICAgICAgaWYgc3ViID09ICJjb2xvcndheSI6CiAgICAgICAgICAgICAgICByZXR1cm4gX25vcm1hbGl6ZV92YWx1ZShjb21wLmdldCgiY29sb3J3YXlzIiwge30pLmdldChtYXRjaGVkX2N3LCAiIikpCiAgICAgICAgICAgIGVsaWYgc3ViID09ICJtYXRlcmlhbF9jb2RlIjoKICAgICAgICAgICAgICAgIHJldHVybiBleHRyYWN0X21hdGVyaWFsX2NvZGUoY29tcC5nZXQoImRlc2NyaXB0aW9uIiwgIiIpKQogICAgICAgICAgICByZXR1cm4gX25vcm1hbGl6ZV92YWx1ZShjb21wLmdldChzdWIsICIiKSkKCiAgICAgICAgZGVmIF9nZXRfc3VwcGxpZXIobWF0X2NvZGUpOgogICAgICAgICAgICBpZiBub3QgbWF0X2NvZGUgb3IgbWF0X2NvZGUgPT0gIk4vQSI6CiAgICAgICAgICAgICAgICByZXR1cm4gIk4vQSIKICAgICAgICAgICAgaWYgbWF0X2NvZGUgaW4gc3VwcGxpZXJfbG9va3VwOgogICAgICAgICAgICAgICAgcmV0dXJuIHN1cHBsaWVyX2xvb2t1cFttYXRfY29kZV0KICAgICAgICAgICAgcmV0dXJuIGZpbmRfc3VwcGxpZXJfYnlfY29kZShib21fZGF0YS5nZXQoImNvc3RpbmdfZGV0YWlsIiwgcGQuRGF0YUZyYW1lKCkpLCBtYXRfY29kZSkKCiAgICAgICAgZGVmIF9nZXRfY2FyZShrZXkpOgogICAgICAgICAgICBlbnRyeSA9IGNhcmVfY29kZXMuZ2V0KG1hdGNoZWRfY3cpIG9yIGNhcmVfY29kZXMuZ2V0KGNvbG9yd2F5X251bSwge30pCiAgICAgICAgICAgIHJldHVybiBfbm9ybWFsaXplX3ZhbHVlKGVudHJ5LmdldChrZXksICIiKSkKCiAgICAgICAgZGVmIF9nZXRfY29udGVudChrZXkpOgogICAgICAgICAgICBlbnRyeSA9IGNvbnRlbnRfY29kZXMuZ2V0KG1hdGNoZWRfY3cpIG9yIGNvbnRlbnRfY29kZXMuZ2V0KGNvbG9yd2F5X251bSwge30pCiAgICAgICAgICAgIHJldHVybiBfbm9ybWFsaXplX3ZhbHVlKGVudHJ5LmdldChrZXksICIiKSkKCiAgICAgICAgZGVmIF9jb2xvcl9zcGVjX3ZhbHVlKGNvbXBvbmVudF9uYW1lKToKICAgICAgICAgICAgaWYgbm90IGNvbXBvbmVudF9uYW1lOgogICAgICAgICAgICAgICAgcmV0dXJuICIiCiAgICAgICAgICAgIGNzID0gYm9tX2RhdGEuZ2V0KCJjb2xvcl9zcGVjaWZpY2F0aW9uIikKICAgICAgICAgICAgaWYgY3MgaXMgTm9uZSBvciBjcy5lbXB0eToKICAgICAgICAgICAgICAgIHJldHVybiAiIgogICAgICAgICAgICBjb21wX2NvbCA9IGNzLmNvbHVtbnNbMF0KICAgICAgICAgICAgY29sb3J3YXlfY29scyA9IFtjIGZvciBjIGluIGNzLmNvbHVtbnNbMTpdIGlmIGMgYW5kIG5vdCBjLnN0YXJ0c3dpdGgoImNvbF8iKV0KICAgICAgICAgICAgcm93X21hdGNoID0gY3NbY3NbY29tcF9jb2xdID09IGNvbXBvbmVudF9uYW1lXQogICAgICAgICAgICBpZiByb3dfbWF0Y2guZW1wdHk6CiAgICAgICAgICAgICAgICByZXR1cm4gIiIKICAgICAgICAgICAgZm9yIGN3X2NvbCBpbiBjb2xvcndheV9jb2xzOgogICAgICAgICAgICAgICAgaWYgbWF0Y2hlZF9jdyBpbiBjd19jb2wgb3IgY3dfY29sIGluIG1hdGNoZWRfY3c6CiAgICAgICAgICAgICAgICAgICAgdmFsID0gc3RyKHJvd19tYXRjaC5pbG9jWzBdLmdldChjd19jb2wsICIiKSkuc3RyaXAoKQogICAgICAgICAgICAgICAgICAgIGlmIHZhbCBhbmQgdmFsLmxvd2VyKCkgbm90IGluICgibm9uZSIsICJuYW4iLCAiIik6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWwKICAgICAgICAgICAgZm9yIGN3X2NvbCBpbiBjb2xvcndheV9jb2xzOgogICAgICAgICAgICAgICAgdmFsID0gc3RyKHJvd19tYXRjaC5pbG9jWzBdLmdldChjd19jb2wsICIiKSkuc3RyaXAoKQogICAgICAgICAgICAgICAgaWYgdmFsIGFuZCB2YWwubG93ZXIoKSBub3QgaW4gKCJub25lIiwgIm5hbiIsICIiKToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsCiAgICAgICAgICAgIHJldHVybiAiIgoKICAgICAgICAjIOKUgOKUgCBMYWJlbCByZXNvbHV0aW9uIGZyb20gZHJvcGRvd24gc2VsZWN0aW9ucyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICAgICAgICBzZWxlY3RlZF9tYWluID0gYm9tX2RhdGEuZ2V0KCJzZWxlY3RlZF9tYWluX2xhYmVsX2NvbXAiKQogICAgICAgIHNlbGVjdGVkX2NhcmUgPSBib21fZGF0YS5nZXQoInNlbGVjdGVkX2NhcmVfbGFiZWxfY29tcCIpCgogICAgICAgIGRlZiBfc3BsaXRfY29tcChzZWwpOgogICAgICAgICAgICBpZiBzZWwgYW5kICIgLSAiIGluIHN0cihzZWwpOgogICAgICAgICAgICAgICAgcGFydHMgPSBzdHIoc2VsKS5yc3BsaXQoIiAtICIsIDEpCiAgICAgICAgICAgICAgICByZXR1cm4gcGFydHNbMF0uc3RyaXAoKSwgcGFydHNbMV0uc3RyaXAoKQogICAgICAgICAgICByZXR1cm4gKHNlbCBvciAiIiksICIiCgogICAgICAgIG1haW5fY29tcF9uYW1lLCBtYWluX2NvbXBfaWQgPSBfc3BsaXRfY29tcChzZWxlY3RlZF9tYWluKQogICAgICAgIGNhcmVfY29tcF9uYW1lLCBjYXJlX2NvbXBfaWQgPSBfc3BsaXRfY29tcChzZWxlY3RlZF9jYXJlKQoKICAgICAgICBtYWluX2xhYmVsX2NvZGUgID0gX2dldF9jb21wKG1haW5fY29tcF9uYW1lLCAibWF0ZXJpYWxfY29kZSIpIGlmIG1haW5fY29tcF9uYW1lIGVsc2UgIk4vQSIKICAgICAgICBtYWluX2xhYmVsX2NvbG9yID0gX2NvbG9yX3NwZWNfdmFsdWUobWFpbl9jb21wX25hbWUpIG9yIF9nZXRfY29tcChtYWluX2NvbXBfbmFtZSwgImNvbG9yd2F5IikKICAgICAgICBjYXJlX2xhYmVsX2NvZGUgID0gX2dldF9jb21wKGNhcmVfY29tcF9uYW1lLCAibWF0ZXJpYWxfY29kZSIpIGlmIGNhcmVfY29tcF9uYW1lIGVsc2UgIk4vQSIKICAgICAgICBjYXJlX2xhYmVsX2NvbG9yID0gX2NvbG9yX3NwZWNfdmFsdWUoY2FyZV9jb21wX25hbWUpIG9yIF9nZXRfY29tcChjYXJlX2NvbXBfbmFtZSwgImNvbG9yd2F5IikKCiAgICAgICAgcmVzdWx0LmF0W2lkeCwgIk1haW4gTGFiZWwiXSAgICAgICAgICA9IG1haW5fY29tcF9pZCBvciBtYWluX2xhYmVsX2NvZGUgb3IgIk4vQSIKICAgICAgICByZXN1bHQuYXRbaWR4LCAiTWFpbiBMYWJlbCBDb2xvciJdICAgID0gbWFpbl9sYWJlbF9jb2xvciBvciAiTi9BIgogICAgICAgIHJlc3VsdC5hdFtpZHgsICJNYWluIExhYmVsIFN1cHBsaWVyIl0gPSBfZ2V0X3N1cHBsaWVyKG1haW5fbGFiZWxfY29kZSkKCiAgICAgICAgbG9nb19jb2RlICAgICA9IF9nZXRfY29tcCgiTGFiZWwgTG9nbyAxIiwgIm1hdGVyaWFsX2NvZGUiKQogICAgICAgIGxvZ29fY29sb3J3YXkgPSBfZ2V0X2NvbXAoIkxhYmVsIExvZ28gMSIsICJjb2xvcndheSIpCiAgICAgICAgcmVzdWx0LmF0W2lkeCwgIkFkZGl0aW9uYWwgTWFpbiBMYWJlbCJdICAgICAgID0gbG9nb19jb2RlIG9yIGV4dHJhY3RfaWRfb25seShsb2dvX2NvbG9yd2F5KSBvciAiTi9BIgogICAgICAgIHJlc3VsdC5hdFtpZHgsICJBZGRpdGlvbmFsIE1haW4gTGFiZWwgQ29sb3IiXSA9IGxvZ29fY29sb3J3YXkKCiAgICAgICAgcmVzdWx0LmF0W2lkeCwgIkNhcmUgTGFiZWwiXSAgICAgICAgICA9IGNhcmVfY29tcF9pZCBvciBjYXJlX2xhYmVsX2NvZGUgb3IgIk4vQSIKICAgICAgICByZXN1bHQuYXRbaWR4LCAiQ2FyZSBMYWJlbCBDb2xvciJdICAgID0gY2FyZV9sYWJlbF9jb2xvciBvciAiTi9BIgogICAgICAgIHJlc3VsdC5hdFtpZHgsICJDYXJlIExhYmVsIFN1cHBsaWVyIl0gPSBfZ2V0X3N1cHBsaWVyKGNhcmVfbGFiZWxfY29kZSkKCiAgICAgICAgcmVzdWx0LmF0W2lkeCwgIkNvbnRlbnQgQ29kZSJdID0gX2dldF9jb250ZW50KCJjb250ZW50X2NvZGUiKQogICAgICAgIHJlc3VsdC5hdFtpZHgsICJUUCBGQyJdICAgICAgICA9IF9nZXRfY29udGVudCgic2hlbGwiKQogICAgICAgIHJlc3VsdC5hdFtpZHgsICJDYXJlIENvZGUiXSAgICA9IF9nZXRfY2FyZSgiY2FyZV9jb2RlIikKCiAgICAgICAgaGFuZ3RhZ19jb2RlICAgICA9IF9nZXRfY29tcCgiSGFuZ3RhZyBQYWNrYWdlIFBhcnQiLCAibWF0ZXJpYWxfY29kZSIpCiAgICAgICAgaGFuZ3RhZ19jb2xvcndheSA9IF9nZXRfY29tcCgiSGFuZ3RhZyBQYWNrYWdlIFBhcnQiLCAiY29sb3J3YXkiKQogICAgICAgIHJlc3VsdC5hdFtpZHgsICJIYW5ndGFnIl0gICAgICAgICAgPSBoYW5ndGFnX2NvZGUgb3IgZXh0cmFjdF9pZF9vbmx5KGhhbmd0YWdfY29sb3J3YXkpIG9yICJOL0EiCiAgICAgICAgcmVzdWx0LmF0W2lkeCwgIkhhbmd0YWcgU3VwcGxpZXIiXSA9IF9nZXRfc3VwcGxpZXIoaGFuZ3RhZ19jb2RlKQoKICAgICAgICByZmlkX2Rlc2MgPSBzdHIoY29tcG9uZW50cy5nZXQoIkhhbmd0YWcgUGFja2FnZSBQYXJ0Iiwge30pLmdldCgiZGVzY3JpcHRpb24iLCAiIikpCiAgICAgICAgcmZpZF9jb2RlID0gZXh0cmFjdF9tYXRlcmlhbF9jb2RlKHJmaWRfZGVzYykKICAgICAgICByZXN1bHQuYXRbaWR4LCAiSGFuZ3RhZyAoUkZJRCkiXSAgICAgICAgICA9IHJmaWRfY29kZSBvciBleHRyYWN0X2lkX29ubHkocmZpZF9kZXNjKSBvciAiTi9BIgogICAgICAgIHJlc3VsdC5hdFtpZHgsICJIYW5ndGFnIChSRklEKSBTdXBwbGllciJdICA9IF9nZXRfc3VwcGxpZXIocmZpZF9jb2RlKQogICAgICAgIHJlc3VsdC5hdFtpZHgsICJSRklEIFN0aWNrZXIiXSAgICAgICAgICAgICA9IHJmaWRfY29kZSBvciBleHRyYWN0X2lkX29ubHkocmZpZF9kZXNjKSBvciAiTi9BIgogICAgICAgIHJlc3VsdC5hdFtpZHgsICJSRklEIFN0aWNrZXIgU3VwcGxpZXIiXSAgICA9IF9nZXRfc3VwcGxpZXIocmZpZF9jb2RlKQoKICAgICAgICB1cGNfY29kZSAgICAgPSBfZ2V0X2NvbXAoIlBhY2thZ2luZyAzIiwgIm1hdGVyaWFsX2NvZGUiKQogICAgICAgIHVwY19jb2xvcndheSA9IF9nZXRfY29tcCgiUGFja2FnaW5nIDMiLCAiY29sb3J3YXkiKQogICAgICAgIHJlc3VsdC5hdFtpZHgsICJVUEMgU3RpY2tlciAoUG9seWJhZykiXSA9IHVwY19jb2RlIG9yIGV4dHJhY3RfaWRfb25seSh1cGNfY29sb3J3YXkpIG9yICJOL0EiCiAgICAgICAgcmVzdWx0LmF0W2lkeCwgIlVQQyBTdGlja2VyIFN1cHBsaWVyIl0gID0gX2dldF9zdXBwbGllcih1cGNfY29kZSkKCiAgICAgICAgbm90X2ZvdW5kID0gc3VtKDEgZm9yIGNvbCBpbiBORVdfQ09MVU1OU1s6LTFdIGlmIHN0cihyZXN1bHQuYXRbaWR4LCBjb2xdKSA9PSAiTi9BIikKICAgICAgICBpZiBub3RfZm91bmQgPT0gMDoKICAgICAgICAgICAgcmVzdWx0LmF0W2lkeCwgIlZhbGlkYXRpb24gU3RhdHVzIl0gPSAi4pyFIFZhbGlkYXRlZCIKICAgICAgICBlbGlmIG5vdF9mb3VuZCA8IGxlbihORVdfQ09MVU1OUykgLSAxOgogICAgICAgICAgICByZXN1bHQuYXRbaWR4LCAiVmFsaWRhdGlvbiBTdGF0dXMiXSA9ICLimqDvuI8gUGFydGlhbCIKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXN1bHQuYXRbaWR4LCAiVmFsaWRhdGlvbiBTdGF0dXMiXSA9ICLinYwgRXJyb3I6IE5vIEJPTSBkYXRhIG1hdGNoZWQiCgogICAgcmV0dXJuIHJlc3VsdAo=',
}
for path, b64 in files.items():
    os.makedirs(os.path.dirname(path) or '.', exist_ok=True)
    with open(path, 'wb') as f:
        f.write(base64.b64decode(b64))
    print(f' Written: {path}')
for root, dirs, _ in os.walk('.'):
    for d in dirs:
        if d == '__pycache__':
            try: shutil.rmtree(os.path.join(root, d)); print(f'  Cleared: {os.path.join(root, d)}')
            except: pass
print('\n Done! Run: python -m streamlit run app.py')